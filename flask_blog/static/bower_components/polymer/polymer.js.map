{"version":3,"file":"polymer.js","sources":["../../polymer-gestures/src/scope.js","../../polymer-gestures/src/targetfind.js","../../polymer-gestures/src/touch-action.js","../../polymer-gestures/src/eventFactory.js","../../polymer-gestures/src/pointermap.js","../../polymer-gestures/src/dispatcher.js","../../polymer-gestures/src/mouse.js","../../polymer-gestures/src/touch.js","../../polymer-gestures/src/ms.js","../../polymer-gestures/src/pointer.js","../../polymer-gestures/src/platform-events.js","../../polymer-gestures/src/track.js","../../polymer-gestures/src/hold.js","../../polymer-gestures/src/tap.js","../../polymer-expressions/third_party/esprima/esprima.js","../../polymer-expressions/src/polymer-expressions.js","polymer-versioned.js","../src/boot.js","../src/lib/lang.js","../src/lib/job.js","../src/lib/dom.js","../src/lib/super.js","../src/lib/deserialize.js","../src/api.js","../src/instance/utils.js","../src/instance/events.js","../src/instance/attributes.js","../src/instance/properties.js","../src/instance/mdv.js","../src/instance/base.js","../src/instance/styles.js","../src/declaration/polymer.js","../src/declaration/path.js","../src/declaration/styles.js","../src/declaration/events.js","../src/declaration/properties.js","../src/declaration/attributes.js","../src/declaration/mdv.js","../src/declaration/prototype.js","../src/declaration/queue.js","../src/declaration/import.js","../src/declaration/polymer-element.js","../src/lib/auto-binding.js"],"names":["window","PolymerGestures","scope","HAS_FULL_PATH","pathTest","document","createElement","createShadowRoot","sr","s","appendChild","addEventListener","ev","path","stopPropagation","CustomEvent","bubbles","head","dispatchEvent","parentNode","removeChild","target","shadow","inEl","shadowRoot","webkitShadowRoot","canTarget","Boolean","elementFromPoint","targetingShadow","this","olderShadow","os","olderShadowRoot","se","querySelector","allShadows","element","shadows","push","searchRoot","inRoot","x","y","t","owner","nodeType","Node","DOCUMENT_NODE","DOCUMENT_FRAGMENT_NODE","findTarget","inEvent","clientX","clientY","findTouchAction","n","i","length","ELEMENT_NODE","hasAttribute","getAttribute","host","LCA","a","b","contains","adepth","depth","bdepth","d","walk","u","deepContains","common","insideNode","node","rect","getBoundingClientRect","left","right","top","bottom","targetFinding","bind","shadowSelector","v","selector","rule","attrib2css","selectors","styles","hasTouchAction","style","touchAction","hasShadowRoot","ShadowDOMPolyfill","forEach","r","String","map","el","textContent","MOUSE_PROPS","MOUSE_DEFAULTS","NOP_FACTORY","eventFactory","preventTap","makeBaseEvent","inType","inDict","e","createEvent","initEvent","cancelable","makeGestureEvent","Object","create","k","keys","makePointerEvent","p","buttons","pressure","pointerId","width","height","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","_source","PointerMap","USE_MAP","m","Map","pointers","POINTERS_FN","values","prototype","size","set","inId","indexOf","has","delete","splice","get","clear","callback","thisArg","call","CLONE_PROPS","CLONE_DEFAULTS","HAS_SVG_INSTANCE","SVGElementInstance","dispatcher","pointermap","eventMap","eventSources","eventSourceList","gestures","dependencyMap","down","listeners","index","up","gestureQueue","registerSource","name","source","newEvents","events","registerGesture","obj","g","exposes","toLowerCase","register","initial","es","l","unregister","fireEvent","move","type","fillGestureQueue","cancel","tapPrevented","eventHandler","_handledByPG","fn","listen","addEvent","unlisten","removeEvent","eventName","boundHandler","removeEventListener","makeEvent","preventDefault","_target","cloneEvent","eventCopy","correspondingUseElement","clone","gestureTrigger","j","enabled","requestAnimationFrame","boundGestureTrigger","activateGesture","gesture","dep","recognizer","_pgListeners","actionNode","defaultActions","setAttribute","handler","capture","deactivateGesture","DEDUP_DIST","WHICH_TO_BUTTONS","HAS_BUTTONS","MouseEvent","mouseEvents","POINTER_ID","POINTER_TYPE","lastTouches","isEventSimulatedFromTouch","lts","dx","Math","abs","dy","prepareEvent","which","mousedown","mouseup","mousemove","cleanupMouse","relatedTarget","DEDUP_TIMEOUT","Array","CLICK_COUNT_TIMEOUT","HYSTERESIS","HAS_TOUCH_ACTION","touchEvents","scrollTypes","EMITTER","XSCROLLER","YSCROLLER","touchActionToScrollType","st","firstTouch","isPrimaryTouch","inTouch","identifier","setPrimaryTouch","firstXY","X","Y","scrolling","cancelResetClickCount","removePrimaryPointer","inPointer","resetClickCount","clickCount","resetId","setTimeout","clearTimeout","typeToButtons","ret","touch","id","currentTouchEvent","fastPath","touchToPointer","cte","detail","webkitRadiusX","radiusX","webkitRadiusY","radiusY","webkitForce","force","self","processTouches","inFunction","tl","changedTouches","_cancel","cleanUpPointer","shouldScroll","scrollAxis","oa","da","doa","findTouch","inTL","vacuumTouches","touches","value","key","touchstart","dedupSynthMouse","touchmove","dd","sqrt","touchcancel","touchend","lt","HAS_BITMAP_TYPE","MSPointerEvent","MSPOINTER_TYPE_MOUSE","msEvents","POINTER_TYPES","cleanup","MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel","pointerEvents","pointerdown","pointermove","pointerup","pointercancel","nav","navigator","PointerEvent","msPointerEnabled","undefined","ontouchstart","isSafari","userAgent","match","body","track","trackx","tracky","WIGGLE_THRESHOLD","clampDir","inDelta","calcPositionDelta","inA","inB","pageX","pageY","fireTrack","inTrackingData","downEvent","lastMoveEvent","xDirection","yDirection","gestureProto","trackInfo","ddx","screenX","ddy","screenY","downTarget","tracking","hold","HOLD_DELAY","heldPointer","holdJob","pulse","Date","now","timeStamp","held","fireHold","clearInterval","setInterval","inHoldTime","holdTime","tap","shouldTap","downState","start","altKey","ctrlKey","metaKey","shiftKey","global","assert","condition","message","Error","isDecimalDigit","ch","isWhiteSpace","fromCharCode","isLineTerminator","isIdentifierStart","isIdentifierPart","isKeyword","skipWhitespace","charCodeAt","getIdentifier","slice","scanIdentifier","Token","Identifier","Keyword","NullLiteral","BooleanLiteral","range","scanPunctuator","code2","ch2","code","ch1","Punctuator","throwError","Messages","UnexpectedToken","scanNumericLiteral","number","NumericLiteral","parseFloat","scanStringLiteral","quote","str","octal","StringLiteral","isIdentifierName","token","advance","EOF","lex","lookahead","peek","pos","messageFormat","error","args","arguments","msg","replace","whole","description","throwUnexpected","expect","matchKeyword","keyword","parseArrayInitialiser","elements","parseExpression","delegate","createArrayExpression","parseObjectPropertyKey","createLiteral","createIdentifier","parseObjectProperty","createProperty","parseObjectInitialiser","properties","createObjectExpression","parseGroupExpression","expr","parsePrimaryExpression","createThisExpression","parseArguments","parseNonComputedProperty","parseNonComputedMember","parseComputedMember","parseLeftHandSideExpression","property","createMemberExpression","createCallExpression","parseUnaryExpression","parsePostfixExpression","createUnaryExpression","binaryPrecedence","prec","parseBinaryExpression","stack","operator","pop","createBinaryExpression","parseConditionalExpression","consequent","alternate","createConditionalExpression","parseFilter","createFilter","parseFilters","parseTopLevel","Syntax","parseInExpression","parseAsExpression","createTopLevel","createAsExpression","indexName","createInExpression","parse","inDelegate","state","labelSet","TokenName","ArrayExpression","BinaryExpression","CallExpression","ConditionalExpression","EmptyStatement","ExpressionStatement","Literal","LabeledStatement","LogicalExpression","MemberExpression","ObjectExpression","Program","Property","ThisExpression","UnaryExpression","UnknownLabel","Redeclaration","esprima","prepareBinding","expressionText","filterRegistry","expression","getExpression","scopeIdent","tagName","ex","console","model","oneTime","binding","getBinding","polymerExpressionScopeIdent_","indexIdent","polymerExpressionIndexIdent_","expressionParseCache","ASTDelegate","Expression","valueFn_","IdentPath","Path","object","accessor","computed","dynamicDeps","simplePath","getFn","Filter","notImplemented","arg","valueFn","filters","deps","currentPath","ConstantObservable","value_","convertStylePropertyName","c","findScope","prop","parentScopeName","hasOwnProperty","isLiteralExpression","pathString","isNaN","Number","PolymerExpressions","observer","addPath","getValueFrom","setValue","newValue","setValueFrom",{"end":{"file":"../../polymer-expressions/src/polymer-expressions.js","comments_before":[],"nlb":false,"endpos":3539,"pos":3531,"col":8,"line":117,"value":"fullPath","type":"name"},"start":{"file":"../../polymer-expressions/src/polymer-expressions.js","comments_before":[],"nlb":false,"endpos":3539,"pos":3531,"col":8,"line":117,"value":"fullPath","type":"name"},"name":"fullPath"},"fullPath","fullPath_","parts","context","propName","transform","toModelDirection","initialArgs","toModel","toDOM","apply","unaryOperators","+","-","!","binaryOperators","*","/","%","<",">","<=",">=","==","!=","===","!==","&&","||","op","argument","test","ident","filter","arr","kind","open","discardChanges","deliver","close","firstTime","firstValue","startReset","getValue","finishReset","setValueFn","CompoundObserver","ObserverTransform","count","random","toString","styleObject","join","tokenList","tokens","prepareInstancePositionChanged","template","templateInstance","valid","PathObserver","prepareInstanceModel","scopeName","parentScope","createScopeObject","__proto__","defineProperty","configurable","writable","Polymer","version","extend","api","getOwnPropertyNames","pd","getOwnPropertyDescriptor","nom","job","wait","stop","Job","go","inContext","boundComplete","complete","h","handle","cancelAnimationFrame","registry","HTMLElement","tag","getPrototypeForTag","getPrototypeOf","originalStopPropagation","Event","cancelBubble","$super","arrayOfArgs","caller","_super","nameInThis","warn","memoizeSuper","n$","method","proto","nextSuper","super","noopHandler","deserializeValue","currentValue","inferredType","typeHandlers","string","date","boolean","parseInt","JSON","function","declaration","instance","publish","apis","utils","async","timeout","Platform","flush","cancelAsync","fire","onNode","event","asyncFire","classFollows","anew","old","className","classList","remove","add","injectBoundHTML","html","innerHTML","fragment","instanceTemplate","nop","nob","asyncMethod","log","logFlags","EVENT_PREFIX","addHostListeners","eventDelegates","localName","methodName","getEventHandler","dispatchMethod","group","groupEnd","attributes","copyInstanceAttributes","a$","_instanceAttributes","takeAttributes","_publishLC","attributeToProperty","propertyForAttribute","search","bindPattern","stringValue","serializeValue","reflectPropertyToAttribute","serializedValue","removeAttribute","areSameValue","numberIsNaN","resolveBindingValue","oldValue","updateRecord","createPropertyObserver","_observeNames","o","_propertyObserver","registerObserver","observeArrayValue","openPropertyObserver","notifyPropertyChanges","newValues","oldValues","paths","called","observe","ov","nv","invokeMethod","deliverChanges","propertyChanged_","reflect","callbackName","isArray","closeNamedObserver","ArrayObserver","registerNamedObserver","emitPropertyChangeRecord","Observer","hasObjectObserve","notifier","notifier_","getNotifier","notify","bindToAccessor","observable","resolveFn","privateName","privateObservable","resolvedValue","createComputedProperties","_computedNames","syntax","bindProperty","_observers","closeObservers","observers","o$","_namedObservers","closeNamedObservers","mdv","bindingDelegate","dom","createInstance","bindings_","enableBindingsReflection","path_","_recordBinding","mixinSuper","bindFinished","makeElementReady","asyncUnbindAll","_unbound","unbind","_unbindAllJob","unbindAll","cancelUnbindAll","mustachePattern","isBase","PolymerBase","base","created","ready","createdCallback","prepareElement","ownerDocument","isStagingDocument","_elementPrepared","shadowRoots","_readied","parseDeclarations","attachedCallback","attached","enteredView","hasBeenAttached","domReady","detachedCallback","preventDispose","detached","leftView","enteredViewCallback","leftViewCallback","enteredDocumentCallback","leftDocumentCallback","parseDeclaration","elementElement","fetchTemplate","root","shadowFromTemplate","shadowRootReady","lightFromTemplate","refNode","eventController","insertBefore","marshalNodeReferences","$","querySelectorAll","attributeChangedCallback","attributeChanged","onMutation","listener","MutationObserver","mutations","disconnect","childList","subtree","constructor","Base","shimCssText","cssText","is","ShadowCSS","makeScopeSelector","hasShadowDOMPolyfill","STYLE_SCOPE_ATTRIBUTE","STYLE_CONTROLLER_SCOPE","installControllerStyles","findStyleScope","scopeHasNamedStyle","cssTextForScope","installScopeCssText","installScopeStyle","cssTextToScopeStyle","applyStyleToScope","styleCacheForScope","cache","polyfillScopeStyleCache","_scopeStyles","script","_currentScript","getRegisteredPrototype","registerPrototype","notifyPrototype","waitingForPrototype","client","waitPrototype","registerWhenReady","prototypesByName","declarations","deliverDeclarations","resolveElementPaths","urlResolver","resolveDom","addResolvePathApi","assetPath","URL","baseURI","resolvePath","urlPath","href","importRuleForSheet","sheet","baseUrl","createStyleElement","attr","firstElementChild","s$","nextElementSibling","cssTextFromSheet","__resource","matchesSelector","inSelector","matches","STYLE_SELECTOR","STYLE_LOADABLE_MATCH","SHEET_SELECTOR","STYLE_GLOBAL_SCOPE","SCOPE_ATTR","loadStyles","content","templateContent","convertSheetsToStyles","findLoadableStyles","templateUrl","styleResolver","copySheetAttributes","replaceChild","link","loadables","installSheets","cacheSheets","cacheStyles","installLocalSheets","installGlobalStyles","sheets","findNodes","firstChild","matcher","nodes","array","templateNodes","concat","styleForScope","scopeDescriptor","webkitMatchesSelector","mozMatchesSelector","mixedCaseEventTypes","parseHostEvents","delegates","addAttributeDelegates","hasEventPrefix","removeEventPrefix","trim","prefixLength","findController","controller","currentTarget","prepareEventBinding","eventType","bindingValue","inferObservers","explodeObservers","exploded","ni","names","split","optimizePropertyMaps","_publishNames","publishProperties","requireProperties","lowerCaseMap","propertyInfos","createPropertyAccessor","createPropertyAccessors","ATTRIBUTES_ATTRIBUTE","ATTRIBUTES_REGEX","inheritAttributesObjects","inheritObject","publishAttributes","accumulateInstanceAttributes","clonable","isInstanceAttribute","blackList","extends","noscript","assetpath","cache-csstext","installBindingDelegate","ensurePrototypeTraversal","ancestor","extendeeName","buildPrototype","publishConstructor","extension","generateBasePrototype","desugarBeforeChaining","chainPrototypes","desugarAfterChaining","inheritMetaData","chained","chainObject","extendee","shimStyling","registerCallback","symbol","ctor","extnds","findBasePrototype","ensureBaseApi","memoizedBases","extended","mixinMethod","info","typeExtension","findTypeExtension","registerElement","inherited","queueForElement","mainQueue","importQueue","nextQueued","whenPolymerReady","queue","waitToReady","CustomElements","HTMLImports","whenImportsReady","addReadyCallback","check","__queue","enqueue","shouldAdd","useNative","readied","flushable","addToFlushQueue","shift","nextElement","canReady","isEmpty","flushQueue","flushing","upgradeDocumentTree","flushReadyCallbacks","readyCallbacks","whenReady","importElements","elementOrFragment","importUrls","urls","url","frag","createDocumentFragment","rel","import","isRegistered","isCustomTag","init","loadResources","registered","waitingForQueue","waitingForResources","_register","handleNoScript","_needsResources","makeSyntax"],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\nwindow.PolymerGestures = {};\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function(scope) {\n  var HAS_FULL_PATH = false;\n\n  // test for full event path support\n  var pathTest = document.createElement('meta');\n  if (pathTest.createShadowRoot) {\n    var sr = pathTest.createShadowRoot();\n    var s = document.createElement('span');\n    sr.appendChild(s);\n    pathTest.addEventListener('testpath', function(ev) {\n      if (ev.path) {\n        // if the span is in the event path, then path[0] is the real source for all events\n        HAS_FULL_PATH = ev.path[0] === s;\n      }\n      ev.stopPropagation();\n    });\n    var ev = new CustomEvent('testpath', {bubbles: true});\n    // must add node to DOM to trigger event listener\n    document.head.appendChild(pathTest);\n    s.dispatchEvent(ev);\n    pathTest.parentNode.removeChild(pathTest);\n    sr = s = null;\n  }\n  pathTest = null;\n\n  var target = {\n    shadow: function(inEl) {\n      if (inEl) {\n        return inEl.shadowRoot || inEl.webkitShadowRoot;\n      }\n    },\n    canTarget: function(shadow) {\n      return shadow && Boolean(shadow.elementFromPoint);\n    },\n    targetingShadow: function(inEl) {\n      var s = this.shadow(inEl);\n      if (this.canTarget(s)) {\n        return s;\n      }\n    },\n    olderShadow: function(shadow) {\n      var os = shadow.olderShadowRoot;\n      if (!os) {\n        var se = shadow.querySelector('shadow');\n        if (se) {\n          os = se.olderShadowRoot;\n        }\n      }\n      return os;\n    },\n    allShadows: function(element) {\n      var shadows = [], s = this.shadow(element);\n      while(s) {\n        shadows.push(s);\n        s = this.olderShadow(s);\n      }\n      return shadows;\n    },\n    searchRoot: function(inRoot, x, y) {\n      var t, st, sr, os;\n      if (inRoot) {\n        t = inRoot.elementFromPoint(x, y);\n        if (t) {\n          // found element, check if it has a ShadowRoot\n          sr = this.targetingShadow(t);\n        } else if (inRoot !== document) {\n          // check for sibling roots\n          sr = this.olderShadow(inRoot);\n        }\n        // search other roots, fall back to light dom element\n        return this.searchRoot(sr, x, y) || t;\n      }\n    },\n    owner: function(element) {\n      if (!element) {\n        return document;\n      }\n      var s = element;\n      // walk up until you hit the shadow root or document\n      while (s.parentNode) {\n        s = s.parentNode;\n      }\n      // the owner element is expected to be a Document or ShadowRoot\n      if (s.nodeType != Node.DOCUMENT_NODE && s.nodeType != Node.DOCUMENT_FRAGMENT_NODE) {\n        s = document;\n      }\n      return s;\n    },\n    findTarget: function(inEvent) {\n      if (HAS_FULL_PATH && inEvent.path) {\n        return inEvent.path[0];\n      }\n      var x = inEvent.clientX, y = inEvent.clientY;\n      // if the listener is in the shadow root, it is much faster to start there\n      var s = this.owner(inEvent.target);\n      // if x, y is not in this root, fall back to document search\n      if (!s.elementFromPoint(x, y)) {\n        s = document;\n      }\n      return this.searchRoot(s, x, y);\n    },\n    findTouchAction: function(inEvent) {\n      var n;\n      if (HAS_FULL_PATH && inEvent.path) {\n        var path = inEvent.path;\n        for (var i = 0; i < path.length; i++) {\n          n = path[i];\n          if (n.nodeType === Node.ELEMENT_NODE && n.hasAttribute('touch-action')) {\n            return n.getAttribute('touch-action');\n          }\n        }\n      } else {\n        n = inEvent.target;\n        while(n) {\n          if (n.hasAttribute('touch-action')) {\n            return n.getAttribute('touch-action');\n          }\n          n = n.parentNode || n.host;\n        }\n      }\n      // auto is default\n      return \"auto\";\n    },\n    LCA: function(a, b) {\n      if (a === b) {\n        return a;\n      }\n      if (a && !b) {\n        return a;\n      }\n      if (b && !a) {\n        return b;\n      }\n      if (!b && !a) {\n        return document;\n      }\n      // fast case, a is a direct descendant of b or vice versa\n      if (a.contains && a.contains(b)) {\n        return a;\n      }\n      if (b.contains && b.contains(a)) {\n        return b;\n      }\n      var adepth = this.depth(a);\n      var bdepth = this.depth(b);\n      var d = adepth - bdepth;\n      if (d >= 0) {\n        a = this.walk(a, d);\n      } else {\n        b = this.walk(b, -d);\n      }\n      while (a && b && a !== b) {\n        a = a.parentNode || a.host;\n        b = b.parentNode || b.host;\n      }\n      return a;\n    },\n    walk: function(n, u) {\n      for (var i = 0; n && (i < u); i++) {\n        n = n.parentNode || n.host;\n      }\n      return n;\n    },\n    depth: function(n) {\n      var d = 0;\n      while(n) {\n        d++;\n        n = n.parentNode || n.host;\n      }\n      return d;\n    },\n    deepContains: function(a, b) {\n      var common = this.LCA(a, b);\n      // if a is the common ancestor, it must \"deeply\" contain b\n      return common === a;\n    },\n    insideNode: function(node, x, y) {\n      var rect = node.getBoundingClientRect();\n      return (rect.left <= x) && (x <= rect.right) && (rect.top <= y) && (y <= rect.bottom);\n    }\n  };\n  scope.targetFinding = target;\n  /**\n   * Given an event, finds the \"deepest\" node that could have been the original target before ShadowDOM retargetting\n   *\n   * @param {Event} Event An event object with clientX and clientY properties\n   * @return {Element} The probable event origninator\n   */\n  scope.findTarget = target.findTarget.bind(target);\n  /**\n   * Determines if the \"container\" node deeply contains the \"containee\" node, including situations where the \"containee\" is contained by one or more ShadowDOM\n   * roots.\n   *\n   * @param {Node} container\n   * @param {Node} containee\n   * @return {Boolean}\n   */\n  scope.deepContains = target.deepContains.bind(target);\n\n  /**\n   * Determines if the x/y position is inside the given node.\n   *\n   * Example:\n   *\n   *     function upHandler(event) {\n   *       var innode = PolymerGestures.insideNode(event.target, event.clientX, event.clientY);\n   *       if (innode) {\n   *         // wait for tap?\n   *       } else {\n   *         // tap will never happen\n   *       }\n   *     }\n   *\n   * @param {Node} node\n   * @param {Number} x Screen X position\n   * @param {Number} y screen Y position\n   * @return {Boolean}\n   */\n  scope.insideNode = target.insideNode;\n\n})(window.PolymerGestures);\n","/*\n *\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function() {\n  function shadowSelector(v) {\n    return 'html /deep/ ' + selector(v);\n  }\n  function selector(v) {\n    return '[touch-action=\"' + v + '\"]';\n  }\n  function rule(v) {\n    return '{ -ms-touch-action: ' + v + '; touch-action: ' + v + ';}';\n  }\n  var attrib2css = [\n    'none',\n    'auto',\n    'pan-x',\n    'pan-y',\n    {\n      rule: 'pan-x pan-y',\n      selectors: [\n        'pan-x pan-y',\n        'pan-y pan-x'\n      ]\n    },\n    'manipulation'\n  ];\n  var styles = '';\n  // only install stylesheet if the browser has touch action support\n  var hasTouchAction = typeof document.head.style.touchAction === 'string';\n  // only add shadow selectors if shadowdom is supported\n  var hasShadowRoot = !window.ShadowDOMPolyfill && document.head.createShadowRoot;\n\n  if (hasTouchAction) {\n    attrib2css.forEach(function(r) {\n      if (String(r) === r) {\n        styles += selector(r) + rule(r) + '\\n';\n        if (hasShadowRoot) {\n          styles += shadowSelector(r) + rule(r) + '\\n';\n        }\n      } else {\n        styles += r.selectors.map(selector) + rule(r.rule) + '\\n';\n        if (hasShadowRoot) {\n          styles += r.selectors.map(shadowSelector) + rule(r.rule) + '\\n';\n        }\n      }\n    });\n\n    var el = document.createElement('style');\n    el.textContent = styles;\n    document.head.appendChild(el);\n  }\n})();\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * This is the constructor for new PointerEvents.\n *\n * New Pointer Events must be given a type, and an optional dictionary of\n * initialization properties.\n *\n * Due to certain platform requirements, events returned from the constructor\n * identify as MouseEvents.\n *\n * @constructor\n * @param {String} inType The type of the event to create.\n * @param {Object} [inDict] An optional dictionary of initial event properties.\n * @return {Event} A new PointerEvent of type `inType` and initialized with properties from `inDict`.\n */\n(function(scope) {\n\n  var MOUSE_PROPS = [\n    'bubbles',\n    'cancelable',\n    'view',\n    'detail',\n    'screenX',\n    'screenY',\n    'clientX',\n    'clientY',\n    'ctrlKey',\n    'altKey',\n    'shiftKey',\n    'metaKey',\n    'button',\n    'relatedTarget',\n    'pageX',\n    'pageY'\n  ];\n\n  var MOUSE_DEFAULTS = [\n    false,\n    false,\n    null,\n    null,\n    0,\n    0,\n    0,\n    0,\n    false,\n    false,\n    false,\n    false,\n    0,\n    null,\n    0,\n    0\n  ];\n\n  var NOP_FACTORY = function(){ return function(){}; };\n\n  var eventFactory = {\n    // TODO(dfreedm): this is overridden by tap recognizer, needs review\n    preventTap: NOP_FACTORY,\n    makeBaseEvent: function(inType, inDict) {\n      var e = document.createEvent('Event');\n      e.initEvent(inType, inDict.bubbles || false, inDict.cancelable || false);\n      e.preventTap = eventFactory.preventTap(e);\n      return e;\n    },\n    makeGestureEvent: function(inType, inDict) {\n      inDict = inDict || Object.create(null);\n\n      var e = this.makeBaseEvent(inType, inDict);\n      for (var i = 0, keys = Object.keys(inDict), k; i < keys.length; i++) {\n        k = keys[i];\n        e[k] = inDict[k];\n      }\n      return e;\n    },\n    makePointerEvent: function(inType, inDict) {\n      inDict = inDict || Object.create(null);\n\n      var e = this.makeBaseEvent(inType, inDict);\n      // define inherited MouseEvent properties\n      for(var i = 0, p; i < MOUSE_PROPS.length; i++) {\n        p = MOUSE_PROPS[i];\n        e[p] = inDict[p] || MOUSE_DEFAULTS[i];\n      }\n      e.buttons = inDict.buttons || 0;\n\n      // Spec requires that pointers without pressure specified use 0.5 for down\n      // state and 0 for up state.\n      var pressure = 0;\n      if (inDict.pressure) {\n        pressure = inDict.pressure;\n      } else {\n        pressure = e.buttons ? 0.5 : 0;\n      }\n\n      // add x/y properties aliased to clientX/Y\n      e.x = e.clientX;\n      e.y = e.clientY;\n\n      // define the properties of the PointerEvent interface\n      e.pointerId = inDict.pointerId || 0;\n      e.width = inDict.width || 0;\n      e.height = inDict.height || 0;\n      e.pressure = pressure;\n      e.tiltX = inDict.tiltX || 0;\n      e.tiltY = inDict.tiltY || 0;\n      e.pointerType = inDict.pointerType || '';\n      e.hwTimestamp = inDict.hwTimestamp || 0;\n      e.isPrimary = inDict.isPrimary || false;\n      e._source = inDict._source || '';\n      return e;\n    }\n  };\n\n  scope.eventFactory = eventFactory;\n})(window.PolymerGestures);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * This module implements an map of pointer states\n */\n(function(scope) {\n  var USE_MAP = window.Map && window.Map.prototype.forEach;\n  var POINTERS_FN = function(){ return this.size; };\n  function PointerMap() {\n    if (USE_MAP) {\n      var m = new Map();\n      m.pointers = POINTERS_FN;\n      return m;\n    } else {\n      this.keys = [];\n      this.values = [];\n    }\n  }\n\n  PointerMap.prototype = {\n    set: function(inId, inEvent) {\n      var i = this.keys.indexOf(inId);\n      if (i > -1) {\n        this.values[i] = inEvent;\n      } else {\n        this.keys.push(inId);\n        this.values.push(inEvent);\n      }\n    },\n    has: function(inId) {\n      return this.keys.indexOf(inId) > -1;\n    },\n    'delete': function(inId) {\n      var i = this.keys.indexOf(inId);\n      if (i > -1) {\n        this.keys.splice(i, 1);\n        this.values.splice(i, 1);\n      }\n    },\n    get: function(inId) {\n      var i = this.keys.indexOf(inId);\n      return this.values[i];\n    },\n    clear: function() {\n      this.keys.length = 0;\n      this.values.length = 0;\n    },\n    // return value, key, map\n    forEach: function(callback, thisArg) {\n      this.values.forEach(function(v, i) {\n        callback.call(thisArg, v, this.keys[i], this);\n      }, this);\n    },\n    pointers: function() {\n      return this.keys.length;\n    }\n  };\n\n  scope.PointerMap = PointerMap;\n})(window.PolymerGestures);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function(scope) {\n  var CLONE_PROPS = [\n    // MouseEvent\n    'bubbles',\n    'cancelable',\n    'view',\n    'detail',\n    'screenX',\n    'screenY',\n    'clientX',\n    'clientY',\n    'ctrlKey',\n    'altKey',\n    'shiftKey',\n    'metaKey',\n    'button',\n    'relatedTarget',\n    // DOM Level 3\n    'buttons',\n    // PointerEvent\n    'pointerId',\n    'width',\n    'height',\n    'pressure',\n    'tiltX',\n    'tiltY',\n    'pointerType',\n    'hwTimestamp',\n    'isPrimary',\n    // event instance\n    'type',\n    'target',\n    'currentTarget',\n    'which',\n    'pageX',\n    'pageY',\n    'timeStamp',\n    // gesture addons\n    'preventTap',\n    'tapPrevented',\n    '_source'\n  ];\n\n  var CLONE_DEFAULTS = [\n    // MouseEvent\n    false,\n    false,\n    null,\n    null,\n    0,\n    0,\n    0,\n    0,\n    false,\n    false,\n    false,\n    false,\n    0,\n    null,\n    // DOM Level 3\n    0,\n    // PointerEvent\n    0,\n    0,\n    0,\n    0,\n    0,\n    0,\n    '',\n    0,\n    false,\n    // event instance\n    '',\n    null,\n    null,\n    0,\n    0,\n    0,\n    0,\n    function(){},\n    false\n  ];\n\n  var HAS_SVG_INSTANCE = (typeof SVGElementInstance !== 'undefined');\n\n  var eventFactory = scope.eventFactory;\n\n  /**\n   * This module is for normalizing events. Mouse and Touch events will be\n   * collected here, and fire PointerEvents that have the same semantics, no\n   * matter the source.\n   * Events fired:\n   *   - pointerdown: a pointing is added\n   *   - pointerup: a pointer is removed\n   *   - pointermove: a pointer is moved\n   *   - pointerover: a pointer crosses into an element\n   *   - pointerout: a pointer leaves an element\n   *   - pointercancel: a pointer will no longer generate events\n   */\n  var dispatcher = {\n    pointermap: new scope.PointerMap(),\n    eventMap: Object.create(null),\n    // Scope objects for native events.\n    // This exists for ease of testing.\n    eventSources: Object.create(null),\n    eventSourceList: [],\n    gestures: [],\n    // map gesture event -> {listeners: int, index: gestures[int]}\n    dependencyMap: {\n      // make sure down and up are in the map to trigger \"register\"\n      down: {listeners: 0, index: -1},\n      up: {listeners: 0, index: -1}\n    },\n    gestureQueue: [],\n    /**\n     * Add a new event source that will generate pointer events.\n     *\n     * `inSource` must contain an array of event names named `events`, and\n     * functions with the names specified in the `events` array.\n     * @param {string} name A name for the event source\n     * @param {Object} source A new source of platform events.\n     */\n    registerSource: function(name, source) {\n      var s = source;\n      var newEvents = s.events;\n      if (newEvents) {\n        newEvents.forEach(function(e) {\n          if (s[e]) {\n            this.eventMap[e] = s[e].bind(s);\n          }\n        }, this);\n        this.eventSources[name] = s;\n        this.eventSourceList.push(s);\n      }\n    },\n    registerGesture: function(name, source) {\n      var obj = Object.create(null);\n      obj.listeners = 0;\n      obj.index = this.gestures.length;\n      for (var i = 0, g; i < source.exposes.length; i++) {\n        g = source.exposes[i].toLowerCase();\n        this.dependencyMap[g] = obj;\n      }\n      this.gestures.push(source);\n    },\n    register: function(element, initial) {\n      var l = this.eventSourceList.length;\n      for (var i = 0, es; (i < l) && (es = this.eventSourceList[i]); i++) {\n        // call eventsource register\n        es.register.call(es, element, initial);\n      }\n    },\n    unregister: function(element) {\n      var l = this.eventSourceList.length;\n      for (var i = 0, es; (i < l) && (es = this.eventSourceList[i]); i++) {\n        // call eventsource register\n        es.unregister.call(es, element);\n      }\n    },\n    // EVENTS\n    down: function(inEvent) {\n      this.fireEvent('down', inEvent);\n    },\n    move: function(inEvent) {\n      // pipe move events into gesture queue directly\n      inEvent.type = 'move';\n      this.fillGestureQueue(inEvent);\n    },\n    up: function(inEvent) {\n      this.fireEvent('up', inEvent);\n    },\n    cancel: function(inEvent) {\n      inEvent.tapPrevented = true;\n      this.fireEvent('up', inEvent);\n    },\n    // LISTENER LOGIC\n    eventHandler: function(inEvent) {\n      // This is used to prevent multiple dispatch of events from\n      // platform events. This can happen when two elements in different scopes\n      // are set up to create pointer events, which is relevant to Shadow DOM.\n\n      // TODO(dfreedm): make this check more granular, allow for minimal event generation\n      // e.g inEvent._handledByPG['tap'] and inEvent._handledByPG['track'], etc\n      if (inEvent._handledByPG) {\n        return;\n      }\n      var type = inEvent.type;\n      var fn = this.eventMap && this.eventMap[type];\n      if (fn) {\n        fn(inEvent);\n      }\n      inEvent._handledByPG = true;\n    },\n    // set up event listeners\n    listen: function(target, events) {\n      for (var i = 0, l = events.length, e; (i < l) && (e = events[i]); i++) {\n        this.addEvent(target, e);\n      }\n    },\n    // remove event listeners\n    unlisten: function(target, events) {\n      for (var i = 0, l = events.length, e; (i < l) && (e = events[i]); i++) {\n        this.removeEvent(target, e);\n      }\n    },\n    addEvent: function(target, eventName) {\n      target.addEventListener(eventName, this.boundHandler);\n    },\n    removeEvent: function(target, eventName) {\n      target.removeEventListener(eventName, this.boundHandler);\n    },\n    // EVENT CREATION AND TRACKING\n    /**\n     * Creates a new Event of type `inType`, based on the information in\n     * `inEvent`.\n     *\n     * @param {string} inType A string representing the type of event to create\n     * @param {Event} inEvent A platform event with a target\n     * @return {Event} A PointerEvent of type `inType`\n     */\n    makeEvent: function(inType, inEvent) {\n      var e = eventFactory.makePointerEvent(inType, inEvent);\n      e.preventDefault = inEvent.preventDefault;\n      e.tapPrevented = inEvent.tapPrevented;\n      e._target = e._target || inEvent.target;\n      return e;\n    },\n    // make and dispatch an event in one call\n    fireEvent: function(inType, inEvent) {\n      var e = this.makeEvent(inType, inEvent);\n      return this.dispatchEvent(e);\n    },\n    /**\n     * Returns a snapshot of inEvent, with writable properties.\n     *\n     * @param {Event} inEvent An event that contains properties to copy.\n     * @return {Object} An object containing shallow copies of `inEvent`'s\n     *    properties.\n     */\n    cloneEvent: function(inEvent) {\n      var eventCopy = Object.create(null), p;\n      for (var i = 0; i < CLONE_PROPS.length; i++) {\n        p = CLONE_PROPS[i];\n        eventCopy[p] = inEvent[p] || CLONE_DEFAULTS[i];\n        // Work around SVGInstanceElement shadow tree\n        // Return the <use> element that is represented by the instance for Safari, Chrome, IE.\n        // This is the behavior implemented by Firefox.\n        if (p === 'target' || p === 'relatedTarget') {\n          if (HAS_SVG_INSTANCE && eventCopy[p] instanceof SVGElementInstance) {\n            eventCopy[p] = eventCopy[p].correspondingUseElement;\n          }\n        }\n      }\n      // keep the semantics of preventDefault\n      eventCopy.preventDefault = function() {\n        inEvent.preventDefault();\n      };\n      return eventCopy;\n    },\n    /**\n     * Dispatches the event to its target.\n     *\n     * @param {Event} inEvent The event to be dispatched.\n     * @return {Boolean} True if an event handler returns true, false otherwise.\n     */\n    dispatchEvent: function(inEvent) {\n      var t = inEvent._target;\n      if (t) {\n        t.dispatchEvent(inEvent);\n        // clone the event for the gesture system to process\n        // clone after dispatch to pick up gesture prevention code\n        var clone = this.cloneEvent(inEvent);\n        clone.target = t;\n        this.fillGestureQueue(clone);\n      }\n    },\n    gestureTrigger: function() {\n      // process the gesture queue\n      for (var i = 0, e; i < this.gestureQueue.length; i++) {\n        e = this.gestureQueue[i];\n        for (var j = 0, g, fn; j < this.gestures.length; j++) {\n          g = this.gestures[j];\n          fn = g[e.type];\n          if (g.enabled && fn) {\n            fn.call(g, e);\n          }\n        }\n      }\n      this.gestureQueue.length = 0;\n    },\n    fillGestureQueue: function(ev) {\n      // only trigger the gesture queue once\n      if (!this.gestureQueue.length) {\n        requestAnimationFrame(this.boundGestureTrigger);\n      }\n      this.gestureQueue.push(ev);\n    }\n  };\n  dispatcher.boundHandler = dispatcher.eventHandler.bind(dispatcher);\n  dispatcher.boundGestureTrigger = dispatcher.gestureTrigger.bind(dispatcher);\n  scope.dispatcher = dispatcher;\n\n  /**\n   * Listen for `gesture` on `node` with the `handler` function\n   *\n   * If `handler` is the first listener for `gesture`, the underlying gesture recognizer is then enabled.\n   *\n   * @param {Element} node\n   * @param {string} gesture\n   * @return Boolean `gesture` is a valid gesture\n   */\n  scope.activateGesture = function(node, gesture) {\n    var g = gesture.toLowerCase();\n    var dep = dispatcher.dependencyMap[g];\n    if (dep) {\n      var recognizer = dispatcher.gestures[dep.index];\n      if (dep.listeners === 0) {\n        if (recognizer) {\n          recognizer.enabled = true;\n        }\n      }\n      dep.listeners++;\n      if (!node._pgListeners) {\n        dispatcher.register(node);\n        node._pgListeners = 0;\n      }\n      // TODO(dfreedm): re-evaluate bookkeeping to avoid using attributes\n      if (recognizer) {\n        var touchAction = recognizer.defaultActions && recognizer.defaultActions[g];\n        var actionNode;\n        switch(node.nodeType) {\n          case Node.ELEMENT_NODE:\n            actionNode = node;\n          break;\n          case Node.DOCUMENT_FRAGMENT_NODE:\n            actionNode = node.host;\n          break;\n          default:\n            actionNode = null;\n          break;\n        }\n        if (touchAction && actionNode && !actionNode.hasAttribute('touch-action')) {\n          actionNode.setAttribute('touch-action', touchAction);\n        }\n      }\n      node._pgListeners++;\n    }\n    return Boolean(dep);\n  };\n\n  /**\n   *\n   * Listen for `gesture` from `node` with `handler` function.\n   *\n   * @param {Element} node\n   * @param {string} gesture\n   * @param {Function} handler\n   * @param {Boolean} capture\n   */\n  scope.addEventListener = function(node, gesture, handler, capture) {\n    if (handler) {\n      scope.activateGesture(node, gesture);\n      node.addEventListener(gesture, handler, capture);\n    }\n  };\n\n  /**\n   * Tears down the gesture configuration for `node`\n   *\n   * If `handler` is the last listener for `gesture`, the underlying gesture recognizer is disabled.\n   *\n   * @param {Element} node\n   * @param {string} gesture\n   * @return Boolean `gesture` is a valid gesture\n   */\n  scope.deactivateGesture = function(node, gesture) {\n    var g = gesture.toLowerCase();\n    var dep = dispatcher.dependencyMap[g];\n    if (dep) {\n      if (dep.listeners > 0) {\n        dep.listeners--;\n      }\n      if (dep.listeners === 0) {\n        var recognizer = dispatcher.gestures[dep.index];\n        if (recognizer) {\n          recognizer.enabled = false;\n        }\n      }\n      if (node._pgListeners > 0) {\n        node._pgListeners--;\n      }\n      if (node._pgListeners === 0) {\n        dispatcher.unregister(node);\n      }\n    }\n    return Boolean(dep);\n  };\n\n  /**\n   * Stop listening for `gesture` from `node` with `handler` function.\n   *\n   * @param {Element} node\n   * @param {string} gesture\n   * @param {Function} handler\n   * @param {Boolean} capture\n   */\n  scope.removeEventListener = function(node, gesture, handler, capture) {\n    if (handler) {\n      scope.deactivateGesture(node, gesture);\n      node.removeEventListener(gesture, handler, capture);\n    }\n  };\n})(window.PolymerGestures);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function (scope) {\n  var dispatcher = scope.dispatcher;\n  var pointermap = dispatcher.pointermap;\n  // radius around touchend that swallows mouse events\n  var DEDUP_DIST = 25;\n\n  var WHICH_TO_BUTTONS = [0, 1, 4, 2];\n\n  var HAS_BUTTONS = false;\n  try {\n    HAS_BUTTONS = new MouseEvent('test', {buttons: 1}).buttons === 1;\n  } catch (e) {}\n\n  // handler block for native mouse events\n  var mouseEvents = {\n    POINTER_ID: 1,\n    POINTER_TYPE: 'mouse',\n    events: [\n      'mousedown',\n      'mousemove',\n      'mouseup'\n    ],\n    exposes: [\n      'down',\n      'up',\n      'move'\n    ],\n    register: function(target) {\n      dispatcher.listen(target, this.events);\n    },\n    unregister: function(target) {\n      dispatcher.unlisten(target, this.events);\n    },\n    lastTouches: [],\n    // collide with the global mouse listener\n    isEventSimulatedFromTouch: function(inEvent) {\n      var lts = this.lastTouches;\n      var x = inEvent.clientX, y = inEvent.clientY;\n      for (var i = 0, l = lts.length, t; i < l && (t = lts[i]); i++) {\n        // simulated mouse events will be swallowed near a primary touchend\n        var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DIST && dy <= DEDUP_DIST) {\n          return true;\n        }\n      }\n    },\n    prepareEvent: function(inEvent) {\n      var e = dispatcher.cloneEvent(inEvent);\n      e.pointerId = this.POINTER_ID;\n      e.isPrimary = true;\n      e.pointerType = this.POINTER_TYPE;\n      e._source = 'mouse';\n      if (!HAS_BUTTONS) {\n        e.buttons = WHICH_TO_BUTTONS[e.which] || 0;\n      }\n      return e;\n    },\n    mousedown: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var p = pointermap.has(this.POINTER_ID);\n        // TODO(dfreedman) workaround for some elements not sending mouseup\n        // http://crbug/149091\n        if (p) {\n          this.mouseup(inEvent);\n        }\n        var e = this.prepareEvent(inEvent);\n        e.target = scope.findTarget(inEvent);\n        pointermap.set(this.POINTER_ID, e.target);\n        dispatcher.down(e);\n      }\n    },\n    mousemove: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var target = pointermap.get(this.POINTER_ID);\n        if (target) {\n          var e = this.prepareEvent(inEvent);\n          e.target = target;\n          // handle case where we missed a mouseup\n          if (e.buttons === 0) {\n            dispatcher.cancel(e);\n            this.cleanupMouse();\n          } else {\n            dispatcher.move(e);\n          }\n        }\n      }\n    },\n    mouseup: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        e.relatedTarget = scope.findTarget(inEvent);\n        e.target = pointermap.get(this.POINTER_ID);\n        dispatcher.up(e);\n        this.cleanupMouse();\n      }\n    },\n    cleanupMouse: function() {\n      pointermap['delete'](this.POINTER_ID);\n    }\n  };\n\n  scope.mouseEvents = mouseEvents;\n})(window.PolymerGestures);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function(scope) {\n  var dispatcher = scope.dispatcher;\n  var allShadows = scope.targetFinding.allShadows.bind(scope.targetFinding);\n  var pointermap = dispatcher.pointermap;\n  var touchMap = Array.prototype.map.call.bind(Array.prototype.map);\n  // This should be long enough to ignore compat mouse events made by touch\n  var DEDUP_TIMEOUT = 2500;\n  var CLICK_COUNT_TIMEOUT = 200;\n  var HYSTERESIS = 20;\n  var ATTRIB = 'touch-action';\n  // TODO(dfreedm): disable until http://crbug.com/399765 is resolved\n  // var HAS_TOUCH_ACTION = ATTRIB in document.head.style;\n  var HAS_TOUCH_ACTION = false;\n\n  // handler block for native touch events\n  var touchEvents = {\n    events: [\n      'touchstart',\n      'touchmove',\n      'touchend',\n      'touchcancel'\n    ],\n    exposes: [\n      'down',\n      'up',\n      'move'\n    ],\n    register: function(target, initial) {\n      if (initial) {\n        return;\n      }\n      dispatcher.listen(target, this.events);\n    },\n    unregister: function(target) {\n      dispatcher.unlisten(target, this.events);\n    },\n    scrollTypes: {\n      EMITTER: 'none',\n      XSCROLLER: 'pan-x',\n      YSCROLLER: 'pan-y',\n    },\n    touchActionToScrollType: function(touchAction) {\n      var t = touchAction;\n      var st = this.scrollTypes;\n      if (t === st.EMITTER) {\n        return 'none';\n      } else if (t === st.XSCROLLER) {\n        return 'X';\n      } else if (t === st.YSCROLLER) {\n        return 'Y';\n      } else {\n        return 'XY';\n      }\n    },\n    POINTER_TYPE: 'touch',\n    firstTouch: null,\n    isPrimaryTouch: function(inTouch) {\n      return this.firstTouch === inTouch.identifier;\n    },\n    setPrimaryTouch: function(inTouch) {\n      // set primary touch if there no pointers, or the only pointer is the mouse\n      if (pointermap.pointers() === 0 || (pointermap.pointers() === 1 && pointermap.has(1))) {\n        this.firstTouch = inTouch.identifier;\n        this.firstXY = {X: inTouch.clientX, Y: inTouch.clientY};\n        this.scrolling = null;\n        this.cancelResetClickCount();\n      }\n    },\n    removePrimaryPointer: function(inPointer) {\n      if (inPointer.isPrimary) {\n        this.firstTouch = null;\n        this.firstXY = null;\n        this.resetClickCount();\n      }\n    },\n    clickCount: 0,\n    resetId: null,\n    resetClickCount: function() {\n      var fn = function() {\n        this.clickCount = 0;\n        this.resetId = null;\n      }.bind(this);\n      this.resetId = setTimeout(fn, CLICK_COUNT_TIMEOUT);\n    },\n    cancelResetClickCount: function() {\n      if (this.resetId) {\n        clearTimeout(this.resetId);\n      }\n    },\n    typeToButtons: function(type) {\n      var ret = 0;\n      if (type === 'touchstart' || type === 'touchmove') {\n        ret = 1;\n      }\n      return ret;\n    },\n    findTarget: function(touch, id) {\n      if (this.currentTouchEvent.type === 'touchstart') {\n        if (this.isPrimaryTouch(touch)) {\n          var fastPath = {\n            clientX: touch.clientX,\n            clientY: touch.clientY,\n            path: this.currentTouchEvent.path,\n            target: this.currentTouchEvent.target\n          };\n          return scope.findTarget(fastPath);\n        } else {\n          return scope.findTarget(touch);\n        }\n      }\n      // reuse target we found in touchstart\n      return pointermap.get(id);\n    },\n    touchToPointer: function(inTouch) {\n      var cte = this.currentTouchEvent;\n      var e = dispatcher.cloneEvent(inTouch);\n      // Spec specifies that pointerId 1 is reserved for Mouse.\n      // Touch identifiers can start at 0.\n      // Add 2 to the touch identifier for compatibility.\n      var id = e.pointerId = inTouch.identifier + 2;\n      e.target = this.findTarget(inTouch, id);\n      e.bubbles = true;\n      e.cancelable = true;\n      e.detail = this.clickCount;\n      e.buttons = this.typeToButtons(cte.type);\n      e.width = inTouch.webkitRadiusX || inTouch.radiusX || 0;\n      e.height = inTouch.webkitRadiusY || inTouch.radiusY || 0;\n      e.pressure = inTouch.webkitForce || inTouch.force || 0.5;\n      e.isPrimary = this.isPrimaryTouch(inTouch);\n      e.pointerType = this.POINTER_TYPE;\n      e._source = 'touch';\n      // forward touch preventDefaults\n      var self = this;\n      e.preventDefault = function() {\n        self.scrolling = false;\n        self.firstXY = null;\n        cte.preventDefault();\n      };\n      return e;\n    },\n    processTouches: function(inEvent, inFunction) {\n      var tl = inEvent.changedTouches;\n      this.currentTouchEvent = inEvent;\n      for (var i = 0, t, p; i < tl.length; i++) {\n        t = tl[i];\n        p = this.touchToPointer(t);\n        if (inEvent.type === 'touchstart') {\n          pointermap.set(p.pointerId, p.target);\n        }\n        if (pointermap.has(p.pointerId)) {\n          inFunction.call(this, p);\n        }\n        if (inEvent.type === 'touchend' || inEvent._cancel) {\n          this.cleanUpPointer(p);\n        }\n      }\n    },\n    // For single axis scrollers, determines whether the element should emit\n    // pointer events or behave as a scroller\n    shouldScroll: function(inEvent) {\n      if (this.firstXY) {\n        var ret;\n        var touchAction = scope.targetFinding.findTouchAction(inEvent);\n        var scrollAxis = this.touchActionToScrollType(touchAction);\n        if (scrollAxis === 'none') {\n          // this element is a touch-action: none, should never scroll\n          ret = false;\n        } else if (scrollAxis === 'XY') {\n          // this element should always scroll\n          ret = true;\n        } else {\n          var t = inEvent.changedTouches[0];\n          // check the intended scroll axis, and other axis\n          var a = scrollAxis;\n          var oa = scrollAxis === 'Y' ? 'X' : 'Y';\n          var da = Math.abs(t['client' + a] - this.firstXY[a]);\n          var doa = Math.abs(t['client' + oa] - this.firstXY[oa]);\n          // if delta in the scroll axis > delta other axis, scroll instead of\n          // making events\n          ret = da >= doa;\n        }\n        return ret;\n      }\n    },\n    findTouch: function(inTL, inId) {\n      for (var i = 0, l = inTL.length, t; i < l && (t = inTL[i]); i++) {\n        if (t.identifier === inId) {\n          return true;\n        }\n      }\n    },\n    // In some instances, a touchstart can happen without a touchend. This\n    // leaves the pointermap in a broken state.\n    // Therefore, on every touchstart, we remove the touches that did not fire a\n    // touchend event.\n    // To keep state globally consistent, we fire a\n    // pointercancel for this \"abandoned\" touch\n    vacuumTouches: function(inEvent) {\n      var tl = inEvent.touches;\n      // pointermap.pointers() should be < tl.length here, as the touchstart has not\n      // been processed yet.\n      if (pointermap.pointers() >= tl.length) {\n        var d = [];\n        pointermap.forEach(function(value, key) {\n          // Never remove pointerId == 1, which is mouse.\n          // Touch identifiers are 2 smaller than their pointerId, which is the\n          // index in pointermap.\n          if (key !== 1 && !this.findTouch(tl, key - 2)) {\n            var p = value;\n            d.push(p);\n          }\n        }, this);\n        d.forEach(function(p) {\n          this.cancel(p);\n          pointermap.delete(p.pointerId);\n        });\n      }\n    },\n    touchstart: function(inEvent) {\n      this.vacuumTouches(inEvent);\n      this.setPrimaryTouch(inEvent.changedTouches[0]);\n      this.dedupSynthMouse(inEvent);\n      if (!this.scrolling) {\n        this.clickCount++;\n        this.processTouches(inEvent, this.down);\n      }\n    },\n    down: function(inPointer) {\n      dispatcher.down(inPointer);\n    },\n    touchmove: function(inEvent) {\n      if (HAS_TOUCH_ACTION) {\n        // touchevent.cancelable == false is sent when the page is scrolling under native Touch Action in Chrome 36\n        // https://groups.google.com/a/chromium.org/d/msg/input-dev/wHnyukcYBcA/b9kmtwM1jJQJ\n        if (inEvent.cancelable) {\n          this.processTouches(inEvent, this.move);\n        }\n      } else {\n        if (!this.scrolling) {\n          if (this.scrolling === null && this.shouldScroll(inEvent)) {\n            this.scrolling = true;\n          } else {\n            this.scrolling = false;\n            inEvent.preventDefault();\n            this.processTouches(inEvent, this.move);\n          }\n        } else if (this.firstXY) {\n          var t = inEvent.changedTouches[0];\n          var dx = t.clientX - this.firstXY.X;\n          var dy = t.clientY - this.firstXY.Y;\n          var dd = Math.sqrt(dx * dx + dy * dy);\n          if (dd >= HYSTERESIS) {\n            this.touchcancel(inEvent);\n            this.scrolling = true;\n            this.firstXY = null;\n          }\n        }\n      }\n    },\n    move: function(inPointer) {\n      dispatcher.move(inPointer);\n    },\n    touchend: function(inEvent) {\n      this.dedupSynthMouse(inEvent);\n      this.processTouches(inEvent, this.up);\n    },\n    up: function(inPointer) {\n      inPointer.relatedTarget = scope.findTarget(inPointer);\n      dispatcher.up(inPointer);\n    },\n    cancel: function(inPointer) {\n      dispatcher.cancel(inPointer);\n    },\n    touchcancel: function(inEvent) {\n      inEvent._cancel = true;\n      this.processTouches(inEvent, this.cancel);\n    },\n    cleanUpPointer: function(inPointer) {\n      pointermap['delete'](inPointer.pointerId);\n      this.removePrimaryPointer(inPointer);\n    },\n    // prevent synth mouse events from creating pointer events\n    dedupSynthMouse: function(inEvent) {\n      var lts = scope.mouseEvents.lastTouches;\n      var t = inEvent.changedTouches[0];\n      // only the primary finger will synth mouse events\n      if (this.isPrimaryTouch(t)) {\n        // remember x/y of last touch\n        var lt = {x: t.clientX, y: t.clientY};\n        lts.push(lt);\n        var fn = (function(lts, lt){\n          var i = lts.indexOf(lt);\n          if (i > -1) {\n            lts.splice(i, 1);\n          }\n        }).bind(null, lts, lt);\n        setTimeout(fn, DEDUP_TIMEOUT);\n      }\n    }\n  };\n\n  scope.touchEvents = touchEvents;\n})(window.PolymerGestures);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function(scope) {\n  var dispatcher = scope.dispatcher;\n  var pointermap = dispatcher.pointermap;\n  var HAS_BITMAP_TYPE = window.MSPointerEvent && typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE === 'number';\n  var msEvents = {\n    events: [\n      'MSPointerDown',\n      'MSPointerMove',\n      'MSPointerUp',\n      'MSPointerCancel',\n    ],\n    register: function(target) {\n      if (target !== document) {\n        return;\n      }\n      dispatcher.listen(target, this.events);\n    },\n    unregister: function(target) {\n      dispatcher.unlisten(target, this.events);\n    },\n    POINTER_TYPES: [\n      '',\n      'unavailable',\n      'touch',\n      'pen',\n      'mouse'\n    ],\n    prepareEvent: function(inEvent) {\n      var e = inEvent;\n      e = dispatcher.cloneEvent(inEvent);\n      if (HAS_BITMAP_TYPE) {\n        e.pointerType = this.POINTER_TYPES[inEvent.pointerType];\n      }\n      e._source = 'ms';\n      return e;\n    },\n    cleanup: function(id) {\n      pointermap['delete'](id);\n    },\n    MSPointerDown: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      e.target = scope.findTarget(inEvent);\n      pointermap.set(inEvent.pointerId, e.target);\n      dispatcher.down(e);\n    },\n    MSPointerMove: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      e.target = pointermap.get(e.pointerId);\n      dispatcher.move(e);\n    },\n    MSPointerUp: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      e.relatedTarget = scope.findTarget(inEvent);\n      e.target = pointermap.get(e.pointerId);\n      dispatcher.up(e);\n      this.cleanup(inEvent.pointerId);\n    },\n    MSPointerCancel: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      e.relatedTarget = scope.findTarget(inEvent);\n      e.target = pointermap.get(e.pointerId);\n      dispatcher.cancel(e);\n      this.cleanup(inEvent.pointerId);\n    }\n  };\n\n  scope.msEvents = msEvents;\n})(window.PolymerGestures);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function(scope) {\n  var dispatcher = scope.dispatcher;\n  var pointermap = dispatcher.pointermap;\n  var pointerEvents = {\n    events: [\n      'pointerdown',\n      'pointermove',\n      'pointerup',\n      'pointercancel'\n    ],\n    prepareEvent: function(inEvent) {\n      var e = dispatcher.cloneEvent(inEvent);\n      e._source = 'pointer';\n      return e;\n    },\n    register: function(target) {\n      if (target !== document) {\n        return;\n      }\n      dispatcher.listen(target, this.events);\n    },\n    unregister: function(target) {\n      dispatcher.unlisten(target, this.events);\n    },\n    cleanup: function(id) {\n      pointermap['delete'](id);\n    },\n    pointerdown: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      e.target = scope.findTarget(inEvent);\n      pointermap.set(e.pointerId, e.target);\n      dispatcher.down(e);\n    },\n    pointermove: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      e.target = pointermap.get(e.pointerId);\n      dispatcher.move(e);\n    },\n    pointerup: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      e.relatedTarget = scope.findTarget(inEvent);\n      e.target = pointermap.get(e.pointerId);\n      dispatcher.up(e);\n      this.cleanup(inEvent.pointerId);\n    },\n    pointercancel: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      e.relatedTarget = scope.findTarget(inEvent);\n      e.target = pointermap.get(e.pointerId);\n      dispatcher.cancel(e);\n      this.cleanup(inEvent.pointerId);\n    }\n  };\n\n  scope.pointerEvents = pointerEvents;\n})(window.PolymerGestures);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * This module contains the handlers for native platform events.\n * From here, the dispatcher is called to create unified pointer events.\n * Included are touch events (v1), mouse events, and MSPointerEvents.\n */\n(function(scope) {\n  var dispatcher = scope.dispatcher;\n  var nav = window.navigator;\n\n  if (window.PointerEvent) {\n    dispatcher.registerSource('pointer', scope.pointerEvents);\n  } else if (nav.msPointerEnabled) {\n    dispatcher.registerSource('ms', scope.msEvents);\n  } else {\n    dispatcher.registerSource('mouse', scope.mouseEvents);\n    if (window.ontouchstart !== undefined) {\n      dispatcher.registerSource('touch', scope.touchEvents);\n      /*\n       * NOTE: an empty touch listener on body will reactivate nodes imported from templates with touch listeners\n       * Removing it will re-break the nodes\n       *\n       * Work around for https://bugs.webkit.org/show_bug.cgi?id=135628\n       */\n      var isSafari = nav.userAgent.match('Safari') && !nav.userAgent.match('Chrome');\n      if (isSafari) {\n        document.body.addEventListener('touchstart', function(){});\n      }\n    }\n  }\n  dispatcher.register(document, true);\n})(window.PolymerGestures);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * This event denotes the beginning of a series of tracking events.\n *\n * @module PointerGestures\n * @submodule Events\n * @class trackstart\n */\n/**\n * Pixels moved in the x direction since trackstart.\n * @type Number\n * @property dx\n */\n/**\n * Pixes moved in the y direction since trackstart.\n * @type Number\n * @property dy\n */\n/**\n * Pixels moved in the x direction since the last track.\n * @type Number\n * @property ddx\n */\n/**\n * Pixles moved in the y direction since the last track.\n * @type Number\n * @property ddy\n */\n/**\n * The clientX position of the track gesture.\n * @type Number\n * @property clientX\n */\n/**\n * The clientY position of the track gesture.\n * @type Number\n * @property clientY\n */\n/**\n * The pageX position of the track gesture.\n * @type Number\n * @property pageX\n */\n/**\n * The pageY position of the track gesture.\n * @type Number\n * @property pageY\n */\n/**\n * The screenX position of the track gesture.\n * @type Number\n * @property screenX\n */\n/**\n * The screenY position of the track gesture.\n * @type Number\n * @property screenY\n */\n/**\n * The last x axis direction of the pointer.\n * @type Number\n * @property xDirection\n */\n/**\n * The last y axis direction of the pointer.\n * @type Number\n * @property yDirection\n */\n/**\n * A shared object between all tracking events.\n * @type Object\n * @property trackInfo\n */\n/**\n * The element currently under the pointer.\n * @type Element\n * @property relatedTarget\n */\n/**\n * The type of pointer that make the track gesture.\n * @type String\n * @property pointerType\n */\n/**\n *\n * This event fires for all pointer movement being tracked.\n *\n * @class track\n * @extends trackstart\n */\n/**\n * This event fires when the pointer is no longer being tracked.\n *\n * @class trackend\n * @extends trackstart\n */\n\n (function(scope) {\n   var dispatcher = scope.dispatcher;\n   var eventFactory = scope.eventFactory;\n   var pointermap = new scope.PointerMap();\n   var track = {\n     events: [\n       'down',\n       'move',\n       'up',\n     ],\n     exposes: [\n      'trackstart',\n      'track',\n      'trackx',\n      'tracky',\n      'trackend'\n     ],\n     defaultActions: {\n       'track': 'none',\n       'trackx': 'pan-y',\n       'tracky': 'pan-x'\n     },\n     WIGGLE_THRESHOLD: 4,\n     clampDir: function(inDelta) {\n       return inDelta > 0 ? 1 : -1;\n     },\n     calcPositionDelta: function(inA, inB) {\n       var x = 0, y = 0;\n       if (inA && inB) {\n         x = inB.pageX - inA.pageX;\n         y = inB.pageY - inA.pageY;\n       }\n       return {x: x, y: y};\n     },\n     fireTrack: function(inType, inEvent, inTrackingData) {\n       var t = inTrackingData;\n       var d = this.calcPositionDelta(t.downEvent, inEvent);\n       var dd = this.calcPositionDelta(t.lastMoveEvent, inEvent);\n       if (dd.x) {\n         t.xDirection = this.clampDir(dd.x);\n       } else if (inType === 'trackx') {\n         return;\n       }\n       if (dd.y) {\n         t.yDirection = this.clampDir(dd.y);\n       } else if (inType === 'tracky') {\n         return;\n       }\n       var gestureProto = {\n         bubbles: true,\n         cancelable: true,\n         trackInfo: t.trackInfo,\n         relatedTarget: inEvent.relatedTarget,\n         pointerType: inEvent.pointerType,\n         pointerId: inEvent.pointerId,\n         _source: 'track'\n       };\n       if (inType !== 'tracky') {\n         gestureProto.x = inEvent.x;\n         gestureProto.dx = d.x;\n         gestureProto.ddx = dd.x;\n         gestureProto.clientX = inEvent.clientX;\n         gestureProto.pageX = inEvent.pageX;\n         gestureProto.screenX = inEvent.screenX;\n         gestureProto.xDirection = t.xDirection;\n       }\n       if (inType !== 'trackx') {\n         gestureProto.dy = d.y;\n         gestureProto.ddy = dd.y;\n         gestureProto.y = inEvent.y;\n         gestureProto.clientY = inEvent.clientY;\n         gestureProto.pageY = inEvent.pageY;\n         gestureProto.screenY = inEvent.screenY;\n         gestureProto.yDirection = t.yDirection;\n       }\n       var e = eventFactory.makeGestureEvent(inType, gestureProto);\n       t.downTarget.dispatchEvent(e);\n     },\n     down: function(inEvent) {\n       if (inEvent.isPrimary && (inEvent.pointerType === 'mouse' ? inEvent.buttons === 1 : true)) {\n         var p = {\n           downEvent: inEvent,\n           downTarget: inEvent.target,\n           trackInfo: {},\n           lastMoveEvent: null,\n           xDirection: 0,\n           yDirection: 0,\n           tracking: false\n         };\n         pointermap.set(inEvent.pointerId, p);\n       }\n     },\n     move: function(inEvent) {\n       var p = pointermap.get(inEvent.pointerId);\n       if (p) {\n         if (!p.tracking) {\n           var d = this.calcPositionDelta(p.downEvent, inEvent);\n           var move = d.x * d.x + d.y * d.y;\n           // start tracking only if finger moves more than WIGGLE_THRESHOLD\n           if (move > this.WIGGLE_THRESHOLD) {\n             p.tracking = true;\n             p.lastMoveEvent = p.downEvent;\n             this.fireTrack('trackstart', inEvent, p);\n           }\n         }\n         if (p.tracking) {\n           this.fireTrack('track', inEvent, p);\n           this.fireTrack('trackx', inEvent, p);\n           this.fireTrack('tracky', inEvent, p);\n         }\n         p.lastMoveEvent = inEvent;\n       }\n     },\n     up: function(inEvent) {\n       var p = pointermap.get(inEvent.pointerId);\n       if (p) {\n         if (p.tracking) {\n           this.fireTrack('trackend', inEvent, p);\n         }\n         pointermap.delete(inEvent.pointerId);\n       }\n     }\n   };\n   dispatcher.registerGesture('track', track);\n })(window.PolymerGestures);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * This event is fired when a pointer is held down for 200ms.\n *\n * @module PointerGestures\n * @submodule Events\n * @class hold\n */\n/**\n * Type of pointer that made the holding event.\n * @type String\n * @property pointerType\n */\n/**\n * Screen X axis position of the held pointer\n * @type Number\n * @property clientX\n */\n/**\n * Screen Y axis position of the held pointer\n * @type Number\n * @property clientY\n */\n/**\n * Type of pointer that made the holding event.\n * @type String\n * @property pointerType\n */\n/**\n * This event is fired every 200ms while a pointer is held down.\n *\n * @class holdpulse\n * @extends hold\n */\n/**\n * Milliseconds pointer has been held down.\n * @type Number\n * @property holdTime\n */\n/**\n * This event is fired when a held pointer is released or moved.\n *\n * @class release\n */\n\n(function(scope) {\n  var dispatcher = scope.dispatcher;\n  var eventFactory = scope.eventFactory;\n  var hold = {\n    // wait at least HOLD_DELAY ms between hold and pulse events\n    HOLD_DELAY: 200,\n    // pointer can move WIGGLE_THRESHOLD pixels before not counting as a hold\n    WIGGLE_THRESHOLD: 16,\n    events: [\n      'down',\n      'move',\n      'up',\n    ],\n    exposes: [\n      'hold',\n      'holdpulse',\n      'release'\n    ],\n    heldPointer: null,\n    holdJob: null,\n    pulse: function() {\n      var hold = Date.now() - this.heldPointer.timeStamp;\n      var type = this.held ? 'holdpulse' : 'hold';\n      this.fireHold(type, hold);\n      this.held = true;\n    },\n    cancel: function() {\n      clearInterval(this.holdJob);\n      if (this.held) {\n        this.fireHold('release');\n      }\n      this.held = false;\n      this.heldPointer = null;\n      this.target = null;\n      this.holdJob = null;\n    },\n    down: function(inEvent) {\n      if (inEvent.isPrimary && !this.heldPointer) {\n        this.heldPointer = inEvent;\n        this.target = inEvent.target;\n        this.holdJob = setInterval(this.pulse.bind(this), this.HOLD_DELAY);\n      }\n    },\n    up: function(inEvent) {\n      if (this.heldPointer && this.heldPointer.pointerId === inEvent.pointerId) {\n        this.cancel();\n      }\n    },\n    move: function(inEvent) {\n      if (this.heldPointer && this.heldPointer.pointerId === inEvent.pointerId) {\n        var x = inEvent.clientX - this.heldPointer.clientX;\n        var y = inEvent.clientY - this.heldPointer.clientY;\n        if ((x * x + y * y) > this.WIGGLE_THRESHOLD) {\n          this.cancel();\n        }\n      }\n    },\n    fireHold: function(inType, inHoldTime) {\n      var p = {\n        bubbles: true,\n        cancelable: true,\n        pointerType: this.heldPointer.pointerType,\n        pointerId: this.heldPointer.pointerId,\n        x: this.heldPointer.clientX,\n        y: this.heldPointer.clientY,\n        _source: 'hold'\n      };\n      if (inHoldTime) {\n        p.holdTime = inHoldTime;\n      }\n      var e = eventFactory.makeGestureEvent(inType, p);\n      this.target.dispatchEvent(e);\n    }\n  };\n  dispatcher.registerGesture('hold', hold);\n})(window.PolymerGestures);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * This event is fired when a pointer quickly goes down and up, and is used to\n * denote activation.\n *\n * Any gesture event can prevent the tap event from being created by calling\n * `event.preventTap`.\n *\n * Any pointer event can prevent the tap by setting the `tapPrevented` property\n * on itself.\n *\n * @module PointerGestures\n * @submodule Events\n * @class tap\n */\n/**\n * X axis position of the tap.\n * @property x\n * @type Number\n */\n/**\n * Y axis position of the tap.\n * @property y\n * @type Number\n */\n/**\n * Type of the pointer that made the tap.\n * @property pointerType\n * @type String\n */\n(function(scope) {\n  var dispatcher = scope.dispatcher;\n  var eventFactory = scope.eventFactory;\n  var pointermap = new scope.PointerMap();\n  var tap = {\n    events: [\n      'down',\n      'up'\n    ],\n    exposes: [\n      'tap'\n    ],\n    down: function(inEvent) {\n      if (inEvent.isPrimary && !inEvent.tapPrevented) {\n        pointermap.set(inEvent.pointerId, {\n          target: inEvent.target,\n          buttons: inEvent.buttons,\n          x: inEvent.clientX,\n          y: inEvent.clientY\n        });\n      }\n    },\n    shouldTap: function(e, downState) {\n      if (e.pointerType === 'mouse') {\n        // only allow left click to tap for mouse\n        return downState.buttons === 1;\n      }\n      return !e.tapPrevented;\n    },\n    up: function(inEvent) {\n      var start = pointermap.get(inEvent.pointerId);\n      if (start && this.shouldTap(inEvent, start)) {\n        // up.relatedTarget is target currently under finger\n        var t = scope.targetFinding.LCA(start.target, inEvent.relatedTarget);\n        if (t) {\n          var e = eventFactory.makeGestureEvent('tap', {\n            bubbles: true,\n            cancelable: true,\n            x: inEvent.clientX,\n            y: inEvent.clientY,\n            detail: inEvent.detail,\n            pointerType: inEvent.pointerType,\n            pointerId: inEvent.pointerId,\n            altKey: inEvent.altKey,\n            ctrlKey: inEvent.ctrlKey,\n            metaKey: inEvent.metaKey,\n            shiftKey: inEvent.shiftKey,\n            _source: 'tap'\n          });\n          t.dispatchEvent(e);\n        }\n      }\n      pointermap.delete(inEvent.pointerId);\n    }\n  };\n  // patch eventFactory to remove id from tap's pointermap for preventTap calls\n  eventFactory.preventTap = function(e) {\n    return function() {\n      e.tapPrevented = true;\n      pointermap.delete(e.pointerId);\n    };\n  };\n  dispatcher.registerGesture('tap', tap);\n})(window.PolymerGestures);\n","/*\n  Copyright (C) 2013 Ariya Hidayat <ariya.hidayat@gmail.com>\n  Copyright (C) 2013 Thaddee Tyl <thaddee.tyl@gmail.com>\n  Copyright (C) 2012 Ariya Hidayat <ariya.hidayat@gmail.com>\n  Copyright (C) 2012 Mathias Bynens <mathias@qiwi.be>\n  Copyright (C) 2012 Joost-Wim Boekesteijn <joost-wim@boekesteijn.nl>\n  Copyright (C) 2012 Kris Kowal <kris.kowal@cixar.com>\n  Copyright (C) 2012 Yusuke Suzuki <utatane.tea@gmail.com>\n  Copyright (C) 2012 Arpad Borsos <arpad.borsos@googlemail.com>\n  Copyright (C) 2011 Ariya Hidayat <ariya.hidayat@gmail.com>\n\n  Redistribution and use in source and binary forms, with or without\n  modification, are permitted provided that the following conditions are met:\n\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n    * Redistributions in binary form must reproduce the above copyright\n      notice, this list of conditions and the following disclaimer in the\n      documentation and/or other materials provided with the distribution.\n\n  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY\n  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n(function (global) {\n    'use strict';\n\n    var Token,\n        TokenName,\n        Syntax,\n        Messages,\n        source,\n        index,\n        length,\n        delegate,\n        lookahead,\n        state;\n\n    Token = {\n        BooleanLiteral: 1,\n        EOF: 2,\n        Identifier: 3,\n        Keyword: 4,\n        NullLiteral: 5,\n        NumericLiteral: 6,\n        Punctuator: 7,\n        StringLiteral: 8\n    };\n\n    TokenName = {};\n    TokenName[Token.BooleanLiteral] = 'Boolean';\n    TokenName[Token.EOF] = '<end>';\n    TokenName[Token.Identifier] = 'Identifier';\n    TokenName[Token.Keyword] = 'Keyword';\n    TokenName[Token.NullLiteral] = 'Null';\n    TokenName[Token.NumericLiteral] = 'Numeric';\n    TokenName[Token.Punctuator] = 'Punctuator';\n    TokenName[Token.StringLiteral] = 'String';\n\n    Syntax = {\n        ArrayExpression: 'ArrayExpression',\n        BinaryExpression: 'BinaryExpression',\n        CallExpression: 'CallExpression',\n        ConditionalExpression: 'ConditionalExpression',\n        EmptyStatement: 'EmptyStatement',\n        ExpressionStatement: 'ExpressionStatement',\n        Identifier: 'Identifier',\n        Literal: 'Literal',\n        LabeledStatement: 'LabeledStatement',\n        LogicalExpression: 'LogicalExpression',\n        MemberExpression: 'MemberExpression',\n        ObjectExpression: 'ObjectExpression',\n        Program: 'Program',\n        Property: 'Property',\n        ThisExpression: 'ThisExpression',\n        UnaryExpression: 'UnaryExpression'\n    };\n\n    // Error messages should be identical to V8.\n    Messages = {\n        UnexpectedToken:  'Unexpected token %0',\n        UnknownLabel: 'Undefined label \\'%0\\'',\n        Redeclaration: '%0 \\'%1\\' has already been declared'\n    };\n\n    // Ensure the condition is true, otherwise throw an error.\n    // This is only to have a better contract semantic, i.e. another safety net\n    // to catch a logic error. The condition shall be fulfilled in normal case.\n    // Do NOT use this to enforce a certain condition on any user input.\n\n    function assert(condition, message) {\n        if (!condition) {\n            throw new Error('ASSERT: ' + message);\n        }\n    }\n\n    function isDecimalDigit(ch) {\n        return (ch >= 48 && ch <= 57);   // 0..9\n    }\n\n\n    // 7.2 White Space\n\n    function isWhiteSpace(ch) {\n        return (ch === 32) ||  // space\n            (ch === 9) ||      // tab\n            (ch === 0xB) ||\n            (ch === 0xC) ||\n            (ch === 0xA0) ||\n            (ch >= 0x1680 && '\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\uFEFF'.indexOf(String.fromCharCode(ch)) > 0);\n    }\n\n    // 7.3 Line Terminators\n\n    function isLineTerminator(ch) {\n        return (ch === 10) || (ch === 13) || (ch === 0x2028) || (ch === 0x2029);\n    }\n\n    // 7.6 Identifier Names and Identifiers\n\n    function isIdentifierStart(ch) {\n        return (ch === 36) || (ch === 95) ||  // $ (dollar) and _ (underscore)\n            (ch >= 65 && ch <= 90) ||         // A..Z\n            (ch >= 97 && ch <= 122);          // a..z\n    }\n\n    function isIdentifierPart(ch) {\n        return (ch === 36) || (ch === 95) ||  // $ (dollar) and _ (underscore)\n            (ch >= 65 && ch <= 90) ||         // A..Z\n            (ch >= 97 && ch <= 122) ||        // a..z\n            (ch >= 48 && ch <= 57);           // 0..9\n    }\n\n    // 7.6.1.1 Keywords\n\n    function isKeyword(id) {\n        return (id === 'this')\n    }\n\n    // 7.4 Comments\n\n    function skipWhitespace() {\n        while (index < length && isWhiteSpace(source.charCodeAt(index))) {\n           ++index;\n        }\n    }\n\n    function getIdentifier() {\n        var start, ch;\n\n        start = index++;\n        while (index < length) {\n            ch = source.charCodeAt(index);\n            if (isIdentifierPart(ch)) {\n                ++index;\n            } else {\n                break;\n            }\n        }\n\n        return source.slice(start, index);\n    }\n\n    function scanIdentifier() {\n        var start, id, type;\n\n        start = index;\n\n        id = getIdentifier();\n\n        // There is no keyword or literal with only one character.\n        // Thus, it must be an identifier.\n        if (id.length === 1) {\n            type = Token.Identifier;\n        } else if (isKeyword(id)) {\n            type = Token.Keyword;\n        } else if (id === 'null') {\n            type = Token.NullLiteral;\n        } else if (id === 'true' || id === 'false') {\n            type = Token.BooleanLiteral;\n        } else {\n            type = Token.Identifier;\n        }\n\n        return {\n            type: type,\n            value: id,\n            range: [start, index]\n        };\n    }\n\n\n    // 7.7 Punctuators\n\n    function scanPunctuator() {\n        var start = index,\n            code = source.charCodeAt(index),\n            code2,\n            ch1 = source[index],\n            ch2;\n\n        switch (code) {\n\n        // Check for most common single-character punctuators.\n        case 46:   // . dot\n        case 40:   // ( open bracket\n        case 41:   // ) close bracket\n        case 59:   // ; semicolon\n        case 44:   // , comma\n        case 123:  // { open curly brace\n        case 125:  // } close curly brace\n        case 91:   // [\n        case 93:   // ]\n        case 58:   // :\n        case 63:   // ?\n            ++index;\n            return {\n                type: Token.Punctuator,\n                value: String.fromCharCode(code),\n                range: [start, index]\n            };\n\n        default:\n            code2 = source.charCodeAt(index + 1);\n\n            // '=' (char #61) marks an assignment or comparison operator.\n            if (code2 === 61) {\n                switch (code) {\n                case 37:  // %\n                case 38:  // &\n                case 42:  // *:\n                case 43:  // +\n                case 45:  // -\n                case 47:  // /\n                case 60:  // <\n                case 62:  // >\n                case 124: // |\n                    index += 2;\n                    return {\n                        type: Token.Punctuator,\n                        value: String.fromCharCode(code) + String.fromCharCode(code2),\n                        range: [start, index]\n                    };\n\n                case 33: // !\n                case 61: // =\n                    index += 2;\n\n                    // !== and ===\n                    if (source.charCodeAt(index) === 61) {\n                        ++index;\n                    }\n                    return {\n                        type: Token.Punctuator,\n                        value: source.slice(start, index),\n                        range: [start, index]\n                    };\n                default:\n                    break;\n                }\n            }\n            break;\n        }\n\n        // Peek more characters.\n\n        ch2 = source[index + 1];\n\n        // Other 2-character punctuators: && ||\n\n        if (ch1 === ch2 && ('&|'.indexOf(ch1) >= 0)) {\n            index += 2;\n            return {\n                type: Token.Punctuator,\n                value: ch1 + ch2,\n                range: [start, index]\n            };\n        }\n\n        if ('<>=!+-*%&|^/'.indexOf(ch1) >= 0) {\n            ++index;\n            return {\n                type: Token.Punctuator,\n                value: ch1,\n                range: [start, index]\n            };\n        }\n\n        throwError({}, Messages.UnexpectedToken, 'ILLEGAL');\n    }\n\n    // 7.8.3 Numeric Literals\n    function scanNumericLiteral() {\n        var number, start, ch;\n\n        ch = source[index];\n        assert(isDecimalDigit(ch.charCodeAt(0)) || (ch === '.'),\n            'Numeric literal must start with a decimal digit or a decimal point');\n\n        start = index;\n        number = '';\n        if (ch !== '.') {\n            number = source[index++];\n            ch = source[index];\n\n            // Hex number starts with '0x'.\n            // Octal number starts with '0'.\n            if (number === '0') {\n                // decimal number starts with '0' such as '09' is illegal.\n                if (ch && isDecimalDigit(ch.charCodeAt(0))) {\n                    throwError({}, Messages.UnexpectedToken, 'ILLEGAL');\n                }\n            }\n\n            while (isDecimalDigit(source.charCodeAt(index))) {\n                number += source[index++];\n            }\n            ch = source[index];\n        }\n\n        if (ch === '.') {\n            number += source[index++];\n            while (isDecimalDigit(source.charCodeAt(index))) {\n                number += source[index++];\n            }\n            ch = source[index];\n        }\n\n        if (ch === 'e' || ch === 'E') {\n            number += source[index++];\n\n            ch = source[index];\n            if (ch === '+' || ch === '-') {\n                number += source[index++];\n            }\n            if (isDecimalDigit(source.charCodeAt(index))) {\n                while (isDecimalDigit(source.charCodeAt(index))) {\n                    number += source[index++];\n                }\n            } else {\n                throwError({}, Messages.UnexpectedToken, 'ILLEGAL');\n            }\n        }\n\n        if (isIdentifierStart(source.charCodeAt(index))) {\n            throwError({}, Messages.UnexpectedToken, 'ILLEGAL');\n        }\n\n        return {\n            type: Token.NumericLiteral,\n            value: parseFloat(number),\n            range: [start, index]\n        };\n    }\n\n    // 7.8.4 String Literals\n\n    function scanStringLiteral() {\n        var str = '', quote, start, ch, octal = false;\n\n        quote = source[index];\n        assert((quote === '\\'' || quote === '\"'),\n            'String literal must starts with a quote');\n\n        start = index;\n        ++index;\n\n        while (index < length) {\n            ch = source[index++];\n\n            if (ch === quote) {\n                quote = '';\n                break;\n            } else if (ch === '\\\\') {\n                ch = source[index++];\n                if (!ch || !isLineTerminator(ch.charCodeAt(0))) {\n                    switch (ch) {\n                    case 'n':\n                        str += '\\n';\n                        break;\n                    case 'r':\n                        str += '\\r';\n                        break;\n                    case 't':\n                        str += '\\t';\n                        break;\n                    case 'b':\n                        str += '\\b';\n                        break;\n                    case 'f':\n                        str += '\\f';\n                        break;\n                    case 'v':\n                        str += '\\x0B';\n                        break;\n\n                    default:\n                        str += ch;\n                        break;\n                    }\n                } else {\n                    if (ch ===  '\\r' && source[index] === '\\n') {\n                        ++index;\n                    }\n                }\n            } else if (isLineTerminator(ch.charCodeAt(0))) {\n                break;\n            } else {\n                str += ch;\n            }\n        }\n\n        if (quote !== '') {\n            throwError({}, Messages.UnexpectedToken, 'ILLEGAL');\n        }\n\n        return {\n            type: Token.StringLiteral,\n            value: str,\n            octal: octal,\n            range: [start, index]\n        };\n    }\n\n    function isIdentifierName(token) {\n        return token.type === Token.Identifier ||\n            token.type === Token.Keyword ||\n            token.type === Token.BooleanLiteral ||\n            token.type === Token.NullLiteral;\n    }\n\n    function advance() {\n        var ch;\n\n        skipWhitespace();\n\n        if (index >= length) {\n            return {\n                type: Token.EOF,\n                range: [index, index]\n            };\n        }\n\n        ch = source.charCodeAt(index);\n\n        // Very common: ( and ) and ;\n        if (ch === 40 || ch === 41 || ch === 58) {\n            return scanPunctuator();\n        }\n\n        // String literal starts with single quote (#39) or double quote (#34).\n        if (ch === 39 || ch === 34) {\n            return scanStringLiteral();\n        }\n\n        if (isIdentifierStart(ch)) {\n            return scanIdentifier();\n        }\n\n        // Dot (.) char #46 can also start a floating-point number, hence the need\n        // to check the next character.\n        if (ch === 46) {\n            if (isDecimalDigit(source.charCodeAt(index + 1))) {\n                return scanNumericLiteral();\n            }\n            return scanPunctuator();\n        }\n\n        if (isDecimalDigit(ch)) {\n            return scanNumericLiteral();\n        }\n\n        return scanPunctuator();\n    }\n\n    function lex() {\n        var token;\n\n        token = lookahead;\n        index = token.range[1];\n\n        lookahead = advance();\n\n        index = token.range[1];\n\n        return token;\n    }\n\n    function peek() {\n        var pos;\n\n        pos = index;\n        lookahead = advance();\n        index = pos;\n    }\n\n    // Throw an exception\n\n    function throwError(token, messageFormat) {\n        var error,\n            args = Array.prototype.slice.call(arguments, 2),\n            msg = messageFormat.replace(\n                /%(\\d)/g,\n                function (whole, index) {\n                    assert(index < args.length, 'Message reference must be in range');\n                    return args[index];\n                }\n            );\n\n        error = new Error(msg);\n        error.index = index;\n        error.description = msg;\n        throw error;\n    }\n\n    // Throw an exception because of the token.\n\n    function throwUnexpected(token) {\n        throwError(token, Messages.UnexpectedToken, token.value);\n    }\n\n    // Expect the next token to match the specified punctuator.\n    // If not, an exception will be thrown.\n\n    function expect(value) {\n        var token = lex();\n        if (token.type !== Token.Punctuator || token.value !== value) {\n            throwUnexpected(token);\n        }\n    }\n\n    // Return true if the next token matches the specified punctuator.\n\n    function match(value) {\n        return lookahead.type === Token.Punctuator && lookahead.value === value;\n    }\n\n    // Return true if the next token matches the specified keyword\n\n    function matchKeyword(keyword) {\n        return lookahead.type === Token.Keyword && lookahead.value === keyword;\n    }\n\n    function consumeSemicolon() {\n        // Catch the very common case first: immediately a semicolon (char #59).\n        if (source.charCodeAt(index) === 59) {\n            lex();\n            return;\n        }\n\n        skipWhitespace();\n\n        if (match(';')) {\n            lex();\n            return;\n        }\n\n        if (lookahead.type !== Token.EOF && !match('}')) {\n            throwUnexpected(lookahead);\n        }\n    }\n\n    // 11.1.4 Array Initialiser\n\n    function parseArrayInitialiser() {\n        var elements = [];\n\n        expect('[');\n\n        while (!match(']')) {\n            if (match(',')) {\n                lex();\n                elements.push(null);\n            } else {\n                elements.push(parseExpression());\n\n                if (!match(']')) {\n                    expect(',');\n                }\n            }\n        }\n\n        expect(']');\n\n        return delegate.createArrayExpression(elements);\n    }\n\n    // 11.1.5 Object Initialiser\n\n    function parseObjectPropertyKey() {\n        var token;\n\n        skipWhitespace();\n        token = lex();\n\n        // Note: This function is called only from parseObjectProperty(), where\n        // EOF and Punctuator tokens are already filtered out.\n        if (token.type === Token.StringLiteral || token.type === Token.NumericLiteral) {\n            return delegate.createLiteral(token);\n        }\n\n        return delegate.createIdentifier(token.value);\n    }\n\n    function parseObjectProperty() {\n        var token, key;\n\n        token = lookahead;\n        skipWhitespace();\n\n        if (token.type === Token.EOF || token.type === Token.Punctuator) {\n            throwUnexpected(token);\n        }\n\n        key = parseObjectPropertyKey();\n        expect(':');\n        return delegate.createProperty('init', key, parseExpression());\n    }\n\n    function parseObjectInitialiser() {\n        var properties = [];\n\n        expect('{');\n\n        while (!match('}')) {\n            properties.push(parseObjectProperty());\n\n            if (!match('}')) {\n                expect(',');\n            }\n        }\n\n        expect('}');\n\n        return delegate.createObjectExpression(properties);\n    }\n\n    // 11.1.6 The Grouping Operator\n\n    function parseGroupExpression() {\n        var expr;\n\n        expect('(');\n\n        expr = parseExpression();\n\n        expect(')');\n\n        return expr;\n    }\n\n\n    // 11.1 Primary Expressions\n\n    function parsePrimaryExpression() {\n        var type, token, expr;\n\n        if (match('(')) {\n            return parseGroupExpression();\n        }\n\n        type = lookahead.type;\n\n        if (type === Token.Identifier) {\n            expr = delegate.createIdentifier(lex().value);\n        } else if (type === Token.StringLiteral || type === Token.NumericLiteral) {\n            expr = delegate.createLiteral(lex());\n        } else if (type === Token.Keyword) {\n            if (matchKeyword('this')) {\n                lex();\n                expr = delegate.createThisExpression();\n            }\n        } else if (type === Token.BooleanLiteral) {\n            token = lex();\n            token.value = (token.value === 'true');\n            expr = delegate.createLiteral(token);\n        } else if (type === Token.NullLiteral) {\n            token = lex();\n            token.value = null;\n            expr = delegate.createLiteral(token);\n        } else if (match('[')) {\n            expr = parseArrayInitialiser();\n        } else if (match('{')) {\n            expr = parseObjectInitialiser();\n        }\n\n        if (expr) {\n            return expr;\n        }\n\n        throwUnexpected(lex());\n    }\n\n    // 11.2 Left-Hand-Side Expressions\n\n    function parseArguments() {\n        var args = [];\n\n        expect('(');\n\n        if (!match(')')) {\n            while (index < length) {\n                args.push(parseExpression());\n                if (match(')')) {\n                    break;\n                }\n                expect(',');\n            }\n        }\n\n        expect(')');\n\n        return args;\n    }\n\n    function parseNonComputedProperty() {\n        var token;\n\n        token = lex();\n\n        if (!isIdentifierName(token)) {\n            throwUnexpected(token);\n        }\n\n        return delegate.createIdentifier(token.value);\n    }\n\n    function parseNonComputedMember() {\n        expect('.');\n\n        return parseNonComputedProperty();\n    }\n\n    function parseComputedMember() {\n        var expr;\n\n        expect('[');\n\n        expr = parseExpression();\n\n        expect(']');\n\n        return expr;\n    }\n\n    function parseLeftHandSideExpression() {\n        var expr, args, property;\n\n        expr = parsePrimaryExpression();\n\n        while (true) {\n            if (match('[')) {\n                property = parseComputedMember();\n                expr = delegate.createMemberExpression('[', expr, property);\n            } else if (match('.')) {\n                property = parseNonComputedMember();\n                expr = delegate.createMemberExpression('.', expr, property);\n            } else if (match('(')) {\n                args = parseArguments();\n                expr = delegate.createCallExpression(expr, args);\n            } else {\n                break;\n            }\n        }\n\n        return expr;\n    }\n\n    // 11.3 Postfix Expressions\n\n    var parsePostfixExpression = parseLeftHandSideExpression;\n\n    // 11.4 Unary Operators\n\n    function parseUnaryExpression() {\n        var token, expr;\n\n        if (lookahead.type !== Token.Punctuator && lookahead.type !== Token.Keyword) {\n            expr = parsePostfixExpression();\n        } else if (match('+') || match('-') || match('!')) {\n            token = lex();\n            expr = parseUnaryExpression();\n            expr = delegate.createUnaryExpression(token.value, expr);\n        } else if (matchKeyword('delete') || matchKeyword('void') || matchKeyword('typeof')) {\n            throwError({}, Messages.UnexpectedToken);\n        } else {\n            expr = parsePostfixExpression();\n        }\n\n        return expr;\n    }\n\n    function binaryPrecedence(token) {\n        var prec = 0;\n\n        if (token.type !== Token.Punctuator && token.type !== Token.Keyword) {\n            return 0;\n        }\n\n        switch (token.value) {\n        case '||':\n            prec = 1;\n            break;\n\n        case '&&':\n            prec = 2;\n            break;\n\n        case '==':\n        case '!=':\n        case '===':\n        case '!==':\n            prec = 6;\n            break;\n\n        case '<':\n        case '>':\n        case '<=':\n        case '>=':\n        case 'instanceof':\n            prec = 7;\n            break;\n\n        case 'in':\n            prec = 7;\n            break;\n\n        case '+':\n        case '-':\n            prec = 9;\n            break;\n\n        case '*':\n        case '/':\n        case '%':\n            prec = 11;\n            break;\n\n        default:\n            break;\n        }\n\n        return prec;\n    }\n\n    // 11.5 Multiplicative Operators\n    // 11.6 Additive Operators\n    // 11.7 Bitwise Shift Operators\n    // 11.8 Relational Operators\n    // 11.9 Equality Operators\n    // 11.10 Binary Bitwise Operators\n    // 11.11 Binary Logical Operators\n\n    function parseBinaryExpression() {\n        var expr, token, prec, stack, right, operator, left, i;\n\n        left = parseUnaryExpression();\n\n        token = lookahead;\n        prec = binaryPrecedence(token);\n        if (prec === 0) {\n            return left;\n        }\n        token.prec = prec;\n        lex();\n\n        right = parseUnaryExpression();\n\n        stack = [left, token, right];\n\n        while ((prec = binaryPrecedence(lookahead)) > 0) {\n\n            // Reduce: make a binary expression from the three topmost entries.\n            while ((stack.length > 2) && (prec <= stack[stack.length - 2].prec)) {\n                right = stack.pop();\n                operator = stack.pop().value;\n                left = stack.pop();\n                expr = delegate.createBinaryExpression(operator, left, right);\n                stack.push(expr);\n            }\n\n            // Shift.\n            token = lex();\n            token.prec = prec;\n            stack.push(token);\n            expr = parseUnaryExpression();\n            stack.push(expr);\n        }\n\n        // Final reduce to clean-up the stack.\n        i = stack.length - 1;\n        expr = stack[i];\n        while (i > 1) {\n            expr = delegate.createBinaryExpression(stack[i - 1].value, stack[i - 2], expr);\n            i -= 2;\n        }\n\n        return expr;\n    }\n\n\n    // 11.12 Conditional Operator\n\n    function parseConditionalExpression() {\n        var expr, consequent, alternate;\n\n        expr = parseBinaryExpression();\n\n        if (match('?')) {\n            lex();\n            consequent = parseConditionalExpression();\n            expect(':');\n            alternate = parseConditionalExpression();\n\n            expr = delegate.createConditionalExpression(expr, consequent, alternate);\n        }\n\n        return expr;\n    }\n\n    // Simplification since we do not support AssignmentExpression.\n    var parseExpression = parseConditionalExpression;\n\n    // Polymer Syntax extensions\n\n    // Filter ::\n    //   Identifier\n    //   Identifier \"(\" \")\"\n    //   Identifier \"(\" FilterArguments \")\"\n\n    function parseFilter() {\n        var identifier, args;\n\n        identifier = lex();\n\n        if (identifier.type !== Token.Identifier) {\n            throwUnexpected(identifier);\n        }\n\n        args = match('(') ? parseArguments() : [];\n\n        return delegate.createFilter(identifier.value, args);\n    }\n\n    // Filters ::\n    //   \"|\" Filter\n    //   Filters \"|\" Filter\n\n    function parseFilters() {\n        while (match('|')) {\n            lex();\n            parseFilter();\n        }\n    }\n\n    // TopLevel ::\n    //   LabelledExpressions\n    //   AsExpression\n    //   InExpression\n    //   FilterExpression\n\n    // AsExpression ::\n    //   FilterExpression as Identifier\n\n    // InExpression ::\n    //   Identifier, Identifier in FilterExpression\n    //   Identifier in FilterExpression\n\n    // FilterExpression ::\n    //   Expression\n    //   Expression Filters\n\n    function parseTopLevel() {\n        skipWhitespace();\n        peek();\n\n        var expr = parseExpression();\n        if (expr) {\n            if (lookahead.value === ',' || lookahead.value == 'in' &&\n                       expr.type === Syntax.Identifier) {\n                parseInExpression(expr);\n            } else {\n                parseFilters();\n                if (lookahead.value === 'as') {\n                    parseAsExpression(expr);\n                } else {\n                    delegate.createTopLevel(expr);\n                }\n            }\n        }\n\n        if (lookahead.type !== Token.EOF) {\n            throwUnexpected(lookahead);\n        }\n    }\n\n    function parseAsExpression(expr) {\n        lex();  // as\n        var identifier = lex().value;\n        delegate.createAsExpression(expr, identifier);\n    }\n\n    function parseInExpression(identifier) {\n        var indexName;\n        if (lookahead.value === ',') {\n            lex();\n            if (lookahead.type !== Token.Identifier)\n                throwUnexpected(lookahead);\n            indexName = lex().value;\n        }\n\n        lex();  // in\n        var expr = parseExpression();\n        parseFilters();\n        delegate.createInExpression(identifier.name, indexName, expr);\n    }\n\n    function parse(code, inDelegate) {\n        delegate = inDelegate;\n        source = code;\n        index = 0;\n        length = source.length;\n        lookahead = null;\n        state = {\n            labelSet: {}\n        };\n\n        return parseTopLevel();\n    }\n\n    global.esprima = {\n        parse: parse\n    };\n})(this);\n","// Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n// This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n// The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n// The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n// Code distributed by Google as part of the polymer project is also\n// subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n\n(function (global) {\n  'use strict';\n\n  function prepareBinding(expressionText, name, node, filterRegistry) {\n    var expression;\n    try {\n      expression = getExpression(expressionText);\n      if (expression.scopeIdent &&\n          (node.nodeType !== Node.ELEMENT_NODE ||\n           node.tagName !== 'TEMPLATE' ||\n           (name !== 'bind' && name !== 'repeat'))) {\n        throw Error('as and in can only be used within <template bind/repeat>');\n      }\n    } catch (ex) {\n      console.error('Invalid expression syntax: ' + expressionText, ex);\n      return;\n    }\n\n    return function(model, node, oneTime) {\n      var binding = expression.getBinding(model, filterRegistry, oneTime);\n      if (expression.scopeIdent && binding) {\n        node.polymerExpressionScopeIdent_ = expression.scopeIdent;\n        if (expression.indexIdent)\n          node.polymerExpressionIndexIdent_ = expression.indexIdent;\n      }\n\n      return binding;\n    }\n  }\n\n  // TODO(rafaelw): Implement simple LRU.\n  var expressionParseCache = Object.create(null);\n\n  function getExpression(expressionText) {\n    var expression = expressionParseCache[expressionText];\n    if (!expression) {\n      var delegate = new ASTDelegate();\n      esprima.parse(expressionText, delegate);\n      expression = new Expression(delegate);\n      expressionParseCache[expressionText] = expression;\n    }\n    return expression;\n  }\n\n  function Literal(value) {\n    this.value = value;\n    this.valueFn_ = undefined;\n  }\n\n  Literal.prototype = {\n    valueFn: function() {\n      if (!this.valueFn_) {\n        var value = this.value;\n        this.valueFn_ = function() {\n          return value;\n        }\n      }\n\n      return this.valueFn_;\n    }\n  }\n\n  function IdentPath(name) {\n    this.name = name;\n    this.path = Path.get(name);\n  }\n\n  IdentPath.prototype = {\n    valueFn: function() {\n      if (!this.valueFn_) {\n        var name = this.name;\n        var path = this.path;\n        this.valueFn_ = function(model, observer) {\n          if (observer)\n            observer.addPath(model, path);\n\n          return path.getValueFrom(model);\n        }\n      }\n\n      return this.valueFn_;\n    },\n\n    setValue: function(model, newValue) {\n      if (this.path.length == 1);\n        model = findScope(model, this.path[0]);\n\n      return this.path.setValueFrom(model, newValue);\n    }\n  };\n\n  function MemberExpression(object, property, accessor) {\n    this.computed = accessor == '[';\n\n    this.dynamicDeps = typeof object == 'function' ||\n                       object.dynamicDeps ||\n                       (this.computed && !(property instanceof Literal));\n\n    this.simplePath =\n        !this.dynamicDeps &&\n        (property instanceof IdentPath || property instanceof Literal) &&\n        (object instanceof MemberExpression || object instanceof IdentPath);\n\n    this.object = this.simplePath ? object : getFn(object);\n    this.property = !this.computed || this.simplePath ?\n        property : getFn(property);\n  }\n\n  MemberExpression.prototype = {\n    get fullPath() {\n      if (!this.fullPath_) {\n\n        var parts = this.object instanceof MemberExpression ?\n            this.object.fullPath.slice() : [this.object.name];\n        parts.push(this.property instanceof IdentPath ?\n            this.property.name : this.property.value);\n        this.fullPath_ = Path.get(parts);\n      }\n\n      return this.fullPath_;\n    },\n\n    valueFn: function() {\n      if (!this.valueFn_) {\n        var object = this.object;\n\n        if (this.simplePath) {\n          var path = this.fullPath;\n\n          this.valueFn_ = function(model, observer) {\n            if (observer)\n              observer.addPath(model, path);\n\n            return path.getValueFrom(model);\n          };\n        } else if (!this.computed) {\n          var path = Path.get(this.property.name);\n\n          this.valueFn_ = function(model, observer, filterRegistry) {\n            var context = object(model, observer, filterRegistry);\n\n            if (observer)\n              observer.addPath(context, path);\n\n            return path.getValueFrom(context);\n          }\n        } else {\n          // Computed property.\n          var property = this.property;\n\n          this.valueFn_ = function(model, observer, filterRegistry) {\n            var context = object(model, observer, filterRegistry);\n            var propName = property(model, observer, filterRegistry);\n            if (observer)\n              observer.addPath(context, [propName]);\n\n            return context ? context[propName] : undefined;\n          };\n        }\n      }\n      return this.valueFn_;\n    },\n\n    setValue: function(model, newValue) {\n      if (this.simplePath) {\n        this.fullPath.setValueFrom(model, newValue);\n        return newValue;\n      }\n\n      var object = this.object(model);\n      var propName = this.property instanceof IdentPath ? this.property.name :\n          this.property(model);\n      return object[propName] = newValue;\n    }\n  };\n\n  function Filter(name, args) {\n    this.name = name;\n    this.args = [];\n    for (var i = 0; i < args.length; i++) {\n      this.args[i] = getFn(args[i]);\n    }\n  }\n\n  Filter.prototype = {\n    transform: function(model, observer, filterRegistry, toModelDirection,\n                        initialArgs) {\n      var fn = filterRegistry[this.name];\n      var context = model;\n      if (fn) {\n        context = undefined;\n      } else {\n        fn = context[this.name];\n        if (!fn) {\n          console.error('Cannot find function or filter: ' + this.name);\n          return;\n        }\n      }\n\n      // If toModelDirection is falsey, then the \"normal\" (dom-bound) direction\n      // is used. Otherwise, it looks for a 'toModel' property function on the\n      // object.\n      if (toModelDirection) {\n        fn = fn.toModel;\n      } else if (typeof fn.toDOM == 'function') {\n        fn = fn.toDOM;\n      }\n\n      if (typeof fn != 'function') {\n        console.error('Cannot find function or filter: ' + this.name);\n        return;\n      }\n\n      var args = initialArgs || [];\n      for (var i = 0; i < this.args.length; i++) {\n        args.push(getFn(this.args[i])(model, observer, filterRegistry));\n      }\n\n      return fn.apply(context, args);\n    }\n  };\n\n  function notImplemented() { throw Error('Not Implemented'); }\n\n  var unaryOperators = {\n    '+': function(v) { return +v; },\n    '-': function(v) { return -v; },\n    '!': function(v) { return !v; }\n  };\n\n  var binaryOperators = {\n    '+': function(l, r) { return l+r; },\n    '-': function(l, r) { return l-r; },\n    '*': function(l, r) { return l*r; },\n    '/': function(l, r) { return l/r; },\n    '%': function(l, r) { return l%r; },\n    '<': function(l, r) { return l<r; },\n    '>': function(l, r) { return l>r; },\n    '<=': function(l, r) { return l<=r; },\n    '>=': function(l, r) { return l>=r; },\n    '==': function(l, r) { return l==r; },\n    '!=': function(l, r) { return l!=r; },\n    '===': function(l, r) { return l===r; },\n    '!==': function(l, r) { return l!==r; },\n    '&&': function(l, r) { return l&&r; },\n    '||': function(l, r) { return l||r; },\n  };\n\n  function getFn(arg) {\n    return typeof arg == 'function' ? arg : arg.valueFn();\n  }\n\n  function ASTDelegate() {\n    this.expression = null;\n    this.filters = [];\n    this.deps = {};\n    this.currentPath = undefined;\n    this.scopeIdent = undefined;\n    this.indexIdent = undefined;\n    this.dynamicDeps = false;\n  }\n\n  ASTDelegate.prototype = {\n    createUnaryExpression: function(op, argument) {\n      if (!unaryOperators[op])\n        throw Error('Disallowed operator: ' + op);\n\n      argument = getFn(argument);\n\n      return function(model, observer, filterRegistry) {\n        return unaryOperators[op](argument(model, observer, filterRegistry));\n      };\n    },\n\n    createBinaryExpression: function(op, left, right) {\n      if (!binaryOperators[op])\n        throw Error('Disallowed operator: ' + op);\n\n      left = getFn(left);\n      right = getFn(right);\n\n      switch (op) {\n        case '||':\n          this.dynamicDeps = true;\n          return function(model, observer, filterRegistry) {\n            return left(model, observer, filterRegistry) ||\n                right(model, observer, filterRegistry);\n          };\n        case '&&':\n          this.dynamicDeps = true;\n          return function(model, observer, filterRegistry) {\n            return left(model, observer, filterRegistry) &&\n                right(model, observer, filterRegistry);\n          };\n      }\n\n      return function(model, observer, filterRegistry) {\n        return binaryOperators[op](left(model, observer, filterRegistry),\n                                   right(model, observer, filterRegistry));\n      };\n    },\n\n    createConditionalExpression: function(test, consequent, alternate) {\n      test = getFn(test);\n      consequent = getFn(consequent);\n      alternate = getFn(alternate);\n\n      this.dynamicDeps = true;\n\n      return function(model, observer, filterRegistry) {\n        return test(model, observer, filterRegistry) ?\n            consequent(model, observer, filterRegistry) :\n            alternate(model, observer, filterRegistry);\n      }\n    },\n\n    createIdentifier: function(name) {\n      var ident = new IdentPath(name);\n      ident.type = 'Identifier';\n      return ident;\n    },\n\n    createMemberExpression: function(accessor, object, property) {\n      var ex = new MemberExpression(object, property, accessor);\n      if (ex.dynamicDeps)\n        this.dynamicDeps = true;\n      return ex;\n    },\n\n    createCallExpression: function(expression, args) {\n      if (!(expression instanceof IdentPath))\n        throw Error('Only identifier function invocations are allowed');\n\n      var filter = new Filter(expression.name, args);\n\n      return function(model, observer, filterRegistry) {\n        return filter.transform(model, observer, filterRegistry, false);\n      };\n    },\n\n    createLiteral: function(token) {\n      return new Literal(token.value);\n    },\n\n    createArrayExpression: function(elements) {\n      for (var i = 0; i < elements.length; i++)\n        elements[i] = getFn(elements[i]);\n\n      return function(model, observer, filterRegistry) {\n        var arr = []\n        for (var i = 0; i < elements.length; i++)\n          arr.push(elements[i](model, observer, filterRegistry));\n        return arr;\n      }\n    },\n\n    createProperty: function(kind, key, value) {\n      return {\n        key: key instanceof IdentPath ? key.name : key.value,\n        value: value\n      };\n    },\n\n    createObjectExpression: function(properties) {\n      for (var i = 0; i < properties.length; i++)\n        properties[i].value = getFn(properties[i].value);\n\n      return function(model, observer, filterRegistry) {\n        var obj = {};\n        for (var i = 0; i < properties.length; i++)\n          obj[properties[i].key] =\n              properties[i].value(model, observer, filterRegistry);\n        return obj;\n      }\n    },\n\n    createFilter: function(name, args) {\n      this.filters.push(new Filter(name, args));\n    },\n\n    createAsExpression: function(expression, scopeIdent) {\n      this.expression = expression;\n      this.scopeIdent = scopeIdent;\n    },\n\n    createInExpression: function(scopeIdent, indexIdent, expression) {\n      this.expression = expression;\n      this.scopeIdent = scopeIdent;\n      this.indexIdent = indexIdent;\n    },\n\n    createTopLevel: function(expression) {\n      this.expression = expression;\n    },\n\n    createThisExpression: notImplemented\n  }\n\n  function ConstantObservable(value) {\n    this.value_ = value;\n  }\n\n  ConstantObservable.prototype = {\n    open: function() { return this.value_; },\n    discardChanges: function() { return this.value_; },\n    deliver: function() {},\n    close: function() {},\n  }\n\n  function Expression(delegate) {\n    this.scopeIdent = delegate.scopeIdent;\n    this.indexIdent = delegate.indexIdent;\n\n    if (!delegate.expression)\n      throw Error('No expression found.');\n\n    this.expression = delegate.expression;\n    getFn(this.expression); // forces enumeration of path dependencies\n\n    this.filters = delegate.filters;\n    this.dynamicDeps = delegate.dynamicDeps;\n  }\n\n  Expression.prototype = {\n    getBinding: function(model, filterRegistry, oneTime) {\n      if (oneTime)\n        return this.getValue(model, undefined, filterRegistry);\n\n      var observer = new CompoundObserver();\n      // captures deps.\n      var firstValue = this.getValue(model, observer, filterRegistry);\n      var firstTime = true;\n      var self = this;\n\n      function valueFn() {\n        // deps cannot have changed on first value retrieval.\n        if (firstTime) {\n          firstTime = false;\n          return firstValue;\n        }\n\n        if (self.dynamicDeps)\n          observer.startReset();\n\n        var value = self.getValue(model,\n                                  self.dynamicDeps ? observer : undefined,\n                                  filterRegistry);\n        if (self.dynamicDeps)\n          observer.finishReset();\n\n        return value;\n      }\n\n      function setValueFn(newValue) {\n        self.setValue(model, newValue, filterRegistry);\n        return newValue;\n      }\n\n      return new ObserverTransform(observer, valueFn, setValueFn, true);\n    },\n\n    getValue: function(model, observer, filterRegistry) {\n      var value = getFn(this.expression)(model, observer, filterRegistry);\n      for (var i = 0; i < this.filters.length; i++) {\n        value = this.filters[i].transform(model, observer, filterRegistry,\n            false, [value]);\n      }\n\n      return value;\n    },\n\n    setValue: function(model, newValue, filterRegistry) {\n      var count = this.filters ? this.filters.length : 0;\n      while (count-- > 0) {\n        newValue = this.filters[count].transform(model, undefined,\n            filterRegistry, true, [newValue]);\n      }\n\n      if (this.expression.setValue)\n        return this.expression.setValue(model, newValue);\n    }\n  }\n\n  /**\n   * Converts a style property name to a css property name. For example:\n   * \"WebkitUserSelect\" to \"-webkit-user-select\"\n   */\n  function convertStylePropertyName(name) {\n    return String(name).replace(/[A-Z]/g, function(c) {\n      return '-' + c.toLowerCase();\n    });\n  }\n\n  var parentScopeName = '@' + Math.random().toString(36).slice(2);\n\n  // Single ident paths must bind directly to the appropriate scope object.\n  // I.e. Pushed values in two-bindings need to be assigned to the actual model\n  // object.\n  function findScope(model, prop) {\n    while (model[parentScopeName] &&\n           !Object.prototype.hasOwnProperty.call(model, prop)) {\n      model = model[parentScopeName];\n    }\n\n    return model;\n  }\n\n  function isLiteralExpression(pathString) {\n    switch (pathString) {\n      case '':\n        return false;\n\n      case 'false':\n      case 'null':\n      case 'true':\n        return true;\n    }\n\n    if (!isNaN(Number(pathString)))\n      return true;\n\n    return false;\n  };\n\n  function PolymerExpressions() {}\n\n  PolymerExpressions.prototype = {\n    // \"built-in\" filters\n    styleObject: function(value) {\n      var parts = [];\n      for (var key in value) {\n        parts.push(convertStylePropertyName(key) + ': ' + value[key]);\n      }\n      return parts.join('; ');\n    },\n\n    tokenList: function(value) {\n      var tokens = [];\n      for (var key in value) {\n        if (value[key])\n          tokens.push(key);\n      }\n      return tokens.join(' ');\n    },\n\n    // binding delegate API\n    prepareInstancePositionChanged: function(template) {\n      var indexIdent = template.polymerExpressionIndexIdent_;\n      if (!indexIdent)\n        return;\n\n      return function(templateInstance, index) {\n        templateInstance.model[indexIdent] = index;\n      };\n    },\n\n    prepareBinding: function(pathString, name, node) {\n      var path = Path.get(pathString);\n\n      if (!isLiteralExpression(pathString) && path.valid) {\n        if (path.length == 1) {\n          return function(model, node, oneTime) {\n            if (oneTime)\n              return path.getValueFrom(model);\n\n            var scope = findScope(model, path[0]);\n            return new PathObserver(scope, path);\n          };\n        }\n        return; // bail out early if pathString is simple path.\n      }\n\n      return prepareBinding(pathString, name, node, this);\n    },\n\n    prepareInstanceModel: function(template) {\n      var scopeName = template.polymerExpressionScopeIdent_;\n      if (!scopeName)\n        return;\n\n      var parentScope = template.templateInstance ?\n          template.templateInstance.model :\n          template.model;\n\n      var indexName = template.polymerExpressionIndexIdent_;\n\n      return function(model) {\n        return createScopeObject(parentScope, model, scopeName, indexName);\n      };\n    }\n  };\n\n  var createScopeObject = ('__proto__' in {}) ?\n    function(parentScope, model, scopeName, indexName) {\n      var scope = {};\n      scope[scopeName] = model;\n      scope[indexName] = undefined;\n      scope[parentScopeName] = parentScope;\n      scope.__proto__ = parentScope;\n      return scope;\n    } :\n    function(parentScope, model, scopeName, indexName) {\n      var scope = Object.create(parentScope);\n      Object.defineProperty(scope, scopeName,\n          { value: model, configurable: true, writable: true });\n      Object.defineProperty(scope, indexName,\n          { value: undefined, configurable: true, writable: true });\n      Object.defineProperty(scope, parentScopeName,\n          { value: parentScope, configurable: true, writable: true });\n      return scope;\n    };\n\n  global.PolymerExpressions = PolymerExpressions;\n  PolymerExpressions.getExpression = getExpression;\n})(this);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\nPolymer = {\n  version: '0.3.5'\n};\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n// TODO(sorvell): this ensures Polymer is an object and not a function\n// Platform is currently defining it as a function to allow for async loading\n// of polymer; once we refine the loading process this likely goes away.\nif (typeof window.Polymer === 'function') {\n  Polymer = {};\n}\n\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function(scope) {\n\n  // copy own properties from 'api' to 'prototype, with name hinting for 'super'\n  function extend(prototype, api) {\n    if (prototype && api) {\n      // use only own properties of 'api'\n      Object.getOwnPropertyNames(api).forEach(function(n) {\n        // acquire property descriptor\n        var pd = Object.getOwnPropertyDescriptor(api, n);\n        if (pd) {\n          // clone property via descriptor\n          Object.defineProperty(prototype, n, pd);\n          // cache name-of-method for 'super' engine\n          if (typeof pd.value == 'function') {\n            // hint the 'super' engine\n            pd.value.nom = n;\n          }\n        }\n      });\n    }\n    return prototype;\n  }\n  \n  // exports\n\n  scope.extend = extend;\n\n})(Polymer);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function(scope) {\n  \n  // usage\n  \n  // invoke cb.call(this) in 100ms, unless the job is re-registered,\n  // which resets the timer\n  // \n  // this.myJob = this.job(this.myJob, cb, 100)\n  //\n  // returns a job handle which can be used to re-register a job\n\n  var Job = function(inContext) {\n    this.context = inContext;\n    this.boundComplete = this.complete.bind(this)\n  };\n  Job.prototype = {\n    go: function(callback, wait) {\n      this.callback = callback;\n      var h;\n      if (!wait) {\n        h = requestAnimationFrame(this.boundComplete);\n        this.handle = function() {\n          cancelAnimationFrame(h);\n        }\n      } else {\n        h = setTimeout(this.boundComplete, wait);\n        this.handle = function() {\n          clearTimeout(h);\n        }\n      }\n    },\n    stop: function() {\n      if (this.handle) {\n        this.handle();\n        this.handle = null;\n      }\n    },\n    complete: function() {\n      if (this.handle) {\n        this.stop();\n        this.callback.call(this.context);\n      }\n    }\n  };\n  \n  function job(job, callback, wait) {\n    if (job) {\n      job.stop();\n    } else {\n      job = new Job(this);\n    }\n    job.go(callback, wait);\n    return job;\n  }\n  \n  // exports \n\n  scope.job = job;\n  \n})(Polymer);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function(scope) {\n\n  var registry = {};\n\n  HTMLElement.register = function(tag, prototype) {\n    registry[tag] = prototype;\n  }\n\n  // get prototype mapped to node <tag>\n  HTMLElement.getPrototypeForTag = function(tag) {\n    var prototype = !tag ? HTMLElement.prototype : registry[tag];\n    // TODO(sjmiles): creating <tag> is likely to have wasteful side-effects\n    return prototype || Object.getPrototypeOf(document.createElement(tag));\n  };\n\n  // we have to flag propagation stoppage for the event dispatcher\n  var originalStopPropagation = Event.prototype.stopPropagation;\n  Event.prototype.stopPropagation = function() {\n    this.cancelBubble = true;\n    originalStopPropagation.apply(this, arguments);\n  };\n  \n  // TODO(sorvell): remove when we're sure imports does not need\n  // to load stylesheets\n  /*\n  HTMLImports.importer.preloadSelectors += \n      ', polymer-element link[rel=stylesheet]';\n  */\n})(Polymer);\n","/*\r\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\r\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\r\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\r\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\r\n * Code distributed by Google as part of the polymer project is also\r\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\r\n */\r\n\r\n (function(scope) {\r\n    // super\r\n\r\n    // `arrayOfArgs` is an optional array of args like one might pass\r\n    // to `Function.apply`\r\n\r\n    // TODO(sjmiles):\r\n    //    $super must be installed on an instance or prototype chain\r\n    //    as `super`, and invoked via `this`, e.g.\r\n    //      `this.super();`\r\n\r\n    //    will not work if function objects are not unique, for example,\r\n    //    when using mixins.\r\n    //    The memoization strategy assumes each function exists on only one \r\n    //    prototype chain i.e. we use the function object for memoizing)\r\n    //    perhaps we can bookkeep on the prototype itself instead\r\n    function $super(arrayOfArgs) {\r\n      // since we are thunking a method call, performance is important here: \r\n      // memoize all lookups, once memoized the fast path calls no other \r\n      // functions\r\n      //\r\n      // find the caller (cannot be `strict` because of 'caller')\r\n      var caller = $super.caller;\r\n      // memoized 'name of method' \r\n      var nom = caller.nom;\r\n      // memoized next implementation prototype\r\n      var _super = caller._super;\r\n      if (!_super) {\r\n        if (!nom) {\r\n          nom = caller.nom = nameInThis.call(this, caller);\r\n        }\r\n        if (!nom) {\r\n          console.warn('called super() on a method not installed declaratively (has no .nom property)');\r\n        }\r\n        // super prototype is either cached or we have to find it\r\n        // by searching __proto__ (at the 'top')\r\n        // invariant: because we cache _super on fn below, we never reach \r\n        // here from inside a series of calls to super(), so it's ok to \r\n        // start searching from the prototype of 'this' (at the 'top')\r\n        // we must never memoize a null super for this reason\r\n        _super = memoizeSuper(caller, nom, getPrototypeOf(this));\r\n      }\r\n      // our super function\r\n      var fn = _super[nom];\r\n      if (fn) {\r\n        // memoize information so 'fn' can call 'super'\r\n        if (!fn._super) {\r\n          // must not memoize null, or we lose our invariant above\r\n          memoizeSuper(fn, nom, _super);\r\n        }\r\n        // invoke the inherited method\r\n        // if 'fn' is not function valued, this will throw\r\n        return fn.apply(this, arrayOfArgs || []);\r\n      }\r\n    }\r\n\r\n    function nameInThis(value) {\r\n      var p = this.__proto__;\r\n      while (p && p !== HTMLElement.prototype) {\r\n        // TODO(sjmiles): getOwnPropertyNames is absurdly expensive\r\n        var n$ = Object.getOwnPropertyNames(p);\r\n        for (var i=0, l=n$.length, n; i<l && (n=n$[i]); i++) {\r\n          var d = Object.getOwnPropertyDescriptor(p, n);\r\n          if (typeof d.value === 'function' && d.value === value) {\r\n            return n;\r\n          }\r\n        }\r\n        p = p.__proto__;\r\n      }\r\n    }\r\n\r\n    function memoizeSuper(method, name, proto) {\r\n      // find and cache next prototype containing `name`\r\n      // we need the prototype so we can do another lookup\r\n      // from here\r\n      var s = nextSuper(proto, name, method);\r\n      if (s[name]) {\r\n        // `s` is a prototype, the actual method is `s[name]`\r\n        // tag super method with it's name for quicker lookups\r\n        s[name].nom = name;\r\n      }\r\n      return method._super = s;\r\n    }\r\n\r\n    function nextSuper(proto, name, caller) {\r\n      // look for an inherited prototype that implements name\r\n      while (proto) {\r\n        if ((proto[name] !== caller) && proto[name]) {\r\n          return proto;\r\n        }\r\n        proto = getPrototypeOf(proto);\r\n      }\r\n      // must not return null, or we lose our invariant above\r\n      // in this case, a super() call was invoked where no superclass\r\n      // method exists\r\n      // TODO(sjmiles): thow an exception?\r\n      return Object;\r\n    }\r\n\r\n    // NOTE: In some platforms (IE10) the prototype chain is faked via \r\n    // __proto__. Therefore, always get prototype via __proto__ instead of\r\n    // the more standard Object.getPrototypeOf.\r\n    function getPrototypeOf(prototype) {\r\n      return prototype.__proto__;\r\n    }\r\n\r\n    // utility function to precompute name tags for functions\r\n    // in a (unchained) prototype\r\n    function hintSuper(prototype) {\r\n      // tag functions with their prototype name to optimize\r\n      // super call invocations\r\n      for (var n in prototype) {\r\n        var pd = Object.getOwnPropertyDescriptor(prototype, n);\r\n        if (pd && typeof pd.value === 'function') {\r\n          pd.value.nom = n;\r\n        }\r\n      }\r\n    }\r\n\r\n    // exports\r\n\r\n    scope.super = $super;\r\n\r\n})(Polymer);\r\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function(scope) {\n\n  function noopHandler(value) {\n    return value;\n  }\n\n  var typeHandlers = {\n    string: noopHandler,\n    'undefined': noopHandler,\n    date: function(value) {\n      return new Date(Date.parse(value) || Date.now());\n    },\n    boolean: function(value) {\n      if (value === '') {\n        return true;\n      }\n      return value === 'false' ? false : !!value;\n    },\n    number: function(value) {\n      var n = parseFloat(value);\n      // hex values like \"0xFFFF\" parseFloat as 0\n      if (n === 0) {\n        n = parseInt(value);\n      }\n      return isNaN(n) ? value : n;\n      // this code disabled because encoded values (like \"0xFFFF\")\n      // do not round trip to their original format\n      //return (String(floatVal) === value) ? floatVal : value;\n    },\n    object: function(value, currentValue) {\n      if (currentValue === null) {\n        return value;\n      }\n      try {\n        // If the string is an object, we can parse is with the JSON library.\n        // include convenience replace for single-quotes. If the author omits\n        // quotes altogether, parse will fail.\n        return JSON.parse(value.replace(/'/g, '\"'));\n      } catch(e) {\n        // The object isn't valid JSON, return the raw value\n        return value;\n      }\n    },\n    // avoid deserialization of functions\n    'function': function(value, currentValue) {\n      return currentValue;\n    }\n  };\n\n  function deserializeValue(value, currentValue) {\n    // attempt to infer type from default value\n    var inferredType = typeof currentValue;\n    // invent 'date' type value for Date\n    if (currentValue instanceof Date) {\n      inferredType = 'date';\n    }\n    // delegate deserialization via type string\n    return typeHandlers[inferredType](value, currentValue);\n  }\n\n  // exports\n\n  scope.deserializeValue = deserializeValue;\n\n})(Polymer);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n(function(scope) {\n\n  // imports\n\n  var extend = scope.extend;\n\n  // module\n\n  var api = {};\n\n  api.declaration = {};\n  api.instance = {};\n\n  api.publish = function(apis, prototype) {\n    for (var n in apis) {\n      extend(prototype, apis[n]);\n    }\n  };\n\n  // exports\n\n  scope.api = api;\n\n})(Polymer);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function(scope) {\n\n  var utils = {\n    /**\n      * Invokes a function asynchronously. The context of the callback\n      * function is bound to 'this' automatically.\n      * @method async\n      * @param {Function|String} method\n      * @param {any|Array} args\n      * @param {number} timeout\n      */\n    async: function(method, args, timeout) {\n      // when polyfilling Object.observe, ensure changes \n      // propagate before executing the async method\n      Platform.flush();\n      // second argument to `apply` must be an array\n      args = (args && args.length) ? args : [args];\n      // function to invoke\n      var fn = function() {\n        (this[method] || method).apply(this, args);\n      }.bind(this);\n      // execute `fn` sooner or later\n      var handle = timeout ? setTimeout(fn, timeout) :\n          requestAnimationFrame(fn);\n      // NOTE: switch on inverting handle to determine which time is used.\n      return timeout ? handle : ~handle;\n    },\n    cancelAsync: function(handle) {\n      if (handle < 0) {\n        cancelAnimationFrame(~handle);\n      } else {\n        clearTimeout(handle);\n      }\n    },\n    /**\n      * Fire an event.\n      * @method fire\n      * @returns {Object} event\n      * @param {string} type An event name.\n      * @param {any} detail\n      * @param {Node} onNode Target node.\n      * @param {Boolean} bubbles Set false to prevent bubbling, defaults to true\n      * @param {Boolean} cancelable Set false to prevent cancellation, defaults to true\n      */\n    fire: function(type, detail, onNode, bubbles, cancelable) {\n      var node = onNode || this;\n      var detail = detail === null || detail === undefined ? {} : detail;\n      var event = new CustomEvent(type, {\n        bubbles: bubbles !== undefined ? bubbles : true,\n        cancelable: cancelable !== undefined ? cancelable : true,\n        detail: detail\n      });\n      node.dispatchEvent(event);\n      return event;\n    },\n    /**\n      * Fire an event asynchronously.\n      * @method asyncFire\n      * @param {string} type An event name.\n      * @param detail\n      * @param {Node} toNode Target node.\n      */\n    asyncFire: function(/*inType, inDetail*/) {\n      this.async(\"fire\", arguments);\n    },\n    /**\n      * Remove class from old, add class to anew, if they exist.\n      * @param classFollows\n      * @param anew A node.\n      * @param old A node\n      * @param className\n      */\n    classFollows: function(anew, old, className) {\n      if (old) {\n        old.classList.remove(className);\n      }\n      if (anew) {\n        anew.classList.add(className);\n      }\n    },\n    /**\n      * Inject HTML which contains markup bound to this element into\n      * a target element (replacing target element content).\n      * @param String html to inject\n      * @param Element target element\n      */\n    injectBoundHTML: function(html, element) {\n      var template = document.createElement('template');\n      template.innerHTML = html;\n      var fragment = this.instanceTemplate(template);\n      if (element) {\n        element.textContent = '';\n        element.appendChild(fragment);\n      }\n      return fragment;\n    }\n  };\n\n  // no-operation function for handy stubs\n  var nop = function() {};\n\n  // null-object for handy stubs\n  var nob = {};\n\n  // deprecated\n\n  utils.asyncMethod = utils.async;\n\n  // exports\n\n  scope.api.instance.utils = utils;\n  scope.nop = nop;\n  scope.nob = nob;\n\n})(Polymer);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function(scope) {\n\n  // imports\n\n  var log = window.logFlags || {};\n  var EVENT_PREFIX = 'on-';\n\n  // instance events api\n  var events = {\n    // read-only\n    EVENT_PREFIX: EVENT_PREFIX,\n    // event listeners on host\n    addHostListeners: function() {\n      var events = this.eventDelegates;\n      log.events && (Object.keys(events).length > 0) && console.log('[%s] addHostListeners:', this.localName, events);\n      // NOTE: host events look like bindings but really are not;\n      // (1) we don't want the attribute to be set and (2) we want to support\n      // multiple event listeners ('host' and 'instance') and Node.bind\n      // by default supports 1 thing being bound.\n      for (var type in events) {\n        var methodName = events[type];\n        PolymerGestures.addEventListener(this, type, this.element.getEventHandler(this, this, methodName));\n      }\n    },\n    // call 'method' or function method on 'obj' with 'args', if the method exists\n    dispatchMethod: function(obj, method, args) {\n      if (obj) {\n        log.events && console.group('[%s] dispatch [%s]', obj.localName, method);\n        var fn = typeof method === 'function' ? method : obj[method];\n        if (fn) {\n          fn[args ? 'apply' : 'call'](obj, args);\n        }\n        log.events && console.groupEnd();\n        Platform.flush();\n      }\n    }\n  };\n\n  // exports\n\n  scope.api.instance.events = events;\n\n  // alias PolymerGestures event listener logic\n  scope.addEventListener = PolymerGestures.addEventListener;\n  scope.removeEventListener = PolymerGestures.removeEventListener;\n\n})(Polymer);\n","/*\r\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\r\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\r\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\r\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\r\n * Code distributed by Google as part of the polymer project is also\r\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\r\n */\r\n\r\n(function(scope) {\r\n\r\n  // instance api for attributes\r\n\r\n  var attributes = {\r\n    copyInstanceAttributes: function () {\r\n      var a$ = this._instanceAttributes;\r\n      for (var k in a$) {\r\n        if (!this.hasAttribute(k)) {\r\n          this.setAttribute(k, a$[k]);\r\n        }\r\n      }\r\n    },\r\n    // for each attribute on this, deserialize value to property as needed\r\n    takeAttributes: function() {\r\n      // if we have no publish lookup table, we have no attributes to take\r\n      // TODO(sjmiles): ad hoc\r\n      if (this._publishLC) {\r\n        for (var i=0, a$=this.attributes, l=a$.length, a; (a=a$[i]) && i<l; i++) {\r\n          this.attributeToProperty(a.name, a.value);\r\n        }\r\n      }\r\n    },\r\n    // if attribute 'name' is mapped to a property, deserialize\r\n    // 'value' into that property\r\n    attributeToProperty: function(name, value) {\r\n      // try to match this attribute to a property (attributes are\r\n      // all lower-case, so this is case-insensitive search)\r\n      var name = this.propertyForAttribute(name);\r\n      if (name) {\r\n        // filter out 'mustached' values, these are to be\r\n        // replaced with bound-data and are not yet values\r\n        // themselves\r\n        if (value && value.search(scope.bindPattern) >= 0) {\r\n          return;\r\n        }\r\n        // get original value\r\n        var currentValue = this[name];\r\n        // deserialize Boolean or Number values from attribute\r\n        var value = this.deserializeValue(value, currentValue);\r\n        // only act if the value has changed\r\n        if (value !== currentValue) {\r\n          // install new value (has side-effects)\r\n          this[name] = value;\r\n        }\r\n      }\r\n    },\r\n    // return the published property matching name, or undefined\r\n    propertyForAttribute: function(name) {\r\n      var match = this._publishLC && this._publishLC[name];\r\n      //console.log('propertyForAttribute:', name, 'matches', match);\r\n      return match;\r\n    },\r\n    // convert representation of 'stringValue' based on type of 'currentValue'\r\n    deserializeValue: function(stringValue, currentValue) {\r\n      return scope.deserializeValue(stringValue, currentValue);\r\n    },\r\n    serializeValue: function(value, inferredType) {\r\n      if (inferredType === 'boolean') {\r\n        return value ? '' : undefined;\r\n      } else if (inferredType !== 'object' && inferredType !== 'function'\r\n          && value !== undefined) {\r\n        return value;\r\n      }\r\n    },\r\n    reflectPropertyToAttribute: function(name) {\r\n      var inferredType = typeof this[name];\r\n      // try to intelligently serialize property value\r\n      var serializedValue = this.serializeValue(this[name], inferredType);\r\n      // boolean properties must reflect as boolean attributes\r\n      if (serializedValue !== undefined) {\r\n        this.setAttribute(name, serializedValue);\r\n        // TODO(sorvell): we should remove attr for all properties\r\n        // that have undefined serialization; however, we will need to\r\n        // refine the attr reflection system to achieve this; pica, for example,\r\n        // relies on having inferredType object properties not removed as\r\n        // attrs.\r\n      } else if (inferredType === 'boolean') {\r\n        this.removeAttribute(name);\r\n      }\r\n    }\r\n  };\r\n\r\n  // exports\r\n\r\n  scope.api.instance.attributes = attributes;\r\n\r\n})(Polymer);\r\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function(scope) {\n\n  // imports\n\n  var log = window.logFlags || {};\n\n  // magic words\n\n  var OBSERVE_SUFFIX = 'Changed';\n\n  // element api\n\n  var empty = [];\n\n  var updateRecord = {\n    object: undefined,\n    type: 'update',\n    name: undefined,\n    oldValue: undefined\n  };\n\n  var numberIsNaN = Number.isNaN || function(value) {\n    return typeof value === 'number' && isNaN(value);\n  }\n\n  function areSameValue(left, right) {\n    if (left === right)\n      return left !== 0 || 1 / left === 1 / right;\n    if (numberIsNaN(left) && numberIsNaN(right))\n      return true;\n\n    return left !== left && right !== right;\n  }\n\n  // capture A's value if B's value is null or undefined,\n  // otherwise use B's value\n  function resolveBindingValue(oldValue, value) {\n    if (value === undefined && oldValue === null) {\n      return value;\n    }\n    return (value === null || value === undefined) ? oldValue : value;\n  }\n\n  var properties = {\n    createPropertyObserver: function() {\n      var n$ = this._observeNames;\n      if (n$ && n$.length) {\n        var o = this._propertyObserver = new CompoundObserver(true);\n        this.registerObserver(o);\n        // TODO(sorvell): may not be kosher to access the value here (this[n]);\n        // previously we looked at the descriptor on the prototype\n        // this doesn't work for inheritance and not for accessors without\n        // a value property\n        for (var i=0, l=n$.length, n; (i<l) && (n=n$[i]); i++) {\n          o.addPath(this, n);\n          this.observeArrayValue(n, this[n], null);\n        }\n      }\n    },\n    openPropertyObserver: function() {\n      if (this._propertyObserver) {\n        this._propertyObserver.open(this.notifyPropertyChanges, this);\n      }\n    },\n    notifyPropertyChanges: function(newValues, oldValues, paths) {\n      var name, method, called = {};\n      for (var i in oldValues) {\n        // note: paths is of form [object, path, object, path]\n        name = paths[2 * i + 1];\n        method = this.observe[name];\n        if (method) {\n          var ov = oldValues[i], nv = newValues[i];\n          // observes the value if it is an array\n          this.observeArrayValue(name, nv, ov);\n          if (!called[method]) {\n            // only invoke change method if one of ov or nv is not (undefined | null)\n            if ((ov !== undefined && ov !== null) || (nv !== undefined && nv !== null)) {\n              called[method] = true;\n              // TODO(sorvell): call method with the set of values it's expecting;\n              // e.g. 'foo bar': 'invalidate' expects the new and old values for\n              // foo and bar. Currently we give only one of these and then\n              // deliver all the arguments.\n              this.invokeMethod(method, [ov, nv, arguments]);\n            }\n          }\n        }\n      }\n    },\n    deliverChanges: function() {\n      if (this._propertyObserver) {\n        this._propertyObserver.deliver();\n      }\n    },\n    propertyChanged_: function(name, value, oldValue) {\n      if (this.reflect[name]) {\n        this.reflectPropertyToAttribute(name);\n      }\n    },\n    observeArrayValue: function(name, value, old) {\n      // we only care if there are registered side-effects\n      var callbackName = this.observe[name];\n      if (callbackName) {\n        // if we are observing the previous value, stop\n        if (Array.isArray(old)) {\n          log.observe && console.log('[%s] observeArrayValue: unregister observer [%s]', this.localName, name);\n          this.closeNamedObserver(name + '__array');\n        }\n        // if the new value is an array, being observing it\n        if (Array.isArray(value)) {\n          log.observe && console.log('[%s] observeArrayValue: register observer [%s]', this.localName, name, value);\n          var observer = new ArrayObserver(value);\n          observer.open(function(value, old) {\n            this.invokeMethod(callbackName, [old]);\n          }, this);\n          this.registerNamedObserver(name + '__array', observer);\n        }\n      }\n    },\n    emitPropertyChangeRecord: function(name, value, oldValue) {\n      var object = this;\n      if (areSameValue(value, oldValue))\n        return;\n\n      this.propertyChanged_(name, value, oldValue);\n\n      if (!Observer.hasObjectObserve)\n        return;\n\n      var notifier = this.notifier_;\n      if (!notifier)\n        notifier = this.notifier_ = Object.getNotifier(this);\n\n      updateRecord.object = this;\n      updateRecord.name = name;\n      updateRecord.oldValue = oldValue;\n\n      notifier.notify(updateRecord);\n    },\n    bindToAccessor: function(name, observable, resolveFn) {\n      var privateName = name + '_';\n      var privateObservable  = name + 'Observable_';\n\n      this[privateObservable] = observable;\n      var oldValue = this[privateName];\n\n      var self = this;\n      var value = observable.open(function(value, oldValue) {\n        self[privateName] = value;\n        self.emitPropertyChangeRecord(name, value, oldValue);\n      });\n\n      if (resolveFn && !areSameValue(oldValue, value)) {\n        var resolvedValue = resolveFn(oldValue, value);\n        if (!areSameValue(value, resolvedValue)) {\n          value = resolvedValue;\n          if (observable.setValue)\n            observable.setValue(value);\n        }\n      }\n\n      this[privateName] = value;\n      this.emitPropertyChangeRecord(name, value, oldValue);\n\n      var observer = {\n        close: function() {\n          observable.close();\n          self[privateObservable] = undefined;\n        }\n      };\n      this.registerObserver(observer);\n      return observer;\n    },\n    createComputedProperties: function() {\n      if (!this._computedNames) {\n        return;\n      }\n\n      for (var i = 0; i < this._computedNames.length; i++) {\n        var name = this._computedNames[i];\n        var expressionText = this.computed[name];\n        try {\n          var expression = PolymerExpressions.getExpression(expressionText);\n          var observable = expression.getBinding(this, this.element.syntax);\n          this.bindToAccessor(name, observable);\n        } catch (ex) {\n          console.error('Failed to create computed property', ex);\n        }\n      }\n    },\n    bindProperty: function(property, observable, oneTime) {\n      if (oneTime) {\n        this[property] = observable;\n        return;\n      }\n      return this.bindToAccessor(property, observable, resolveBindingValue);\n    },\n    invokeMethod: function(method, args) {\n      var fn = this[method] || method;\n      if (typeof fn === 'function') {\n        fn.apply(this, args);\n      }\n    },\n    registerObserver: function(observer) {\n      if (!this._observers) {\n        this._observers = [observer];\n        return;\n      }\n\n      this._observers.push(observer);\n    },\n    // observer array items are arrays of observers.\n    closeObservers: function() {\n      if (!this._observers) {\n        return;\n      }\n\n      var observers = this._observers;\n      for (var i = 0; i < observers.length; i++) {\n        var observer = observers[i];\n        if (observer && typeof observer.close == 'function') {\n          observer.close();\n        }\n      }\n\n      this._observers = [];\n    },\n    // bookkeeping observers for memory management\n    registerNamedObserver: function(name, observer) {\n      var o$ = this._namedObservers || (this._namedObservers = {});\n      o$[name] = observer;\n    },\n    closeNamedObserver: function(name) {\n      var o$ = this._namedObservers;\n      if (o$ && o$[name]) {\n        o$[name].close();\n        o$[name] = null;\n        return true;\n      }\n    },\n    closeNamedObservers: function() {\n      if (this._namedObservers) {\n        for (var i in this._namedObservers) {\n          this.closeNamedObserver(i);\n        }\n        this._namedObservers = {};\n      }\n    }\n  };\n\n  // logging\n  var LOG_OBSERVE = '[%s] watching [%s]';\n  var LOG_OBSERVED = '[%s#%s] watch: [%s] now [%s] was [%s]';\n  var LOG_CHANGED = '[%s#%s] propertyChanged: [%s] now [%s] was [%s]';\n\n  // exports\n\n  scope.api.instance.properties = properties;\n\n})(Polymer);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function(scope) {\n\n  // imports\n\n  var log = window.logFlags || 0;\n\n  // element api supporting mdv\n  var mdv = {\n    instanceTemplate: function(template) {\n      // ensure a default bindingDelegate\n      var syntax = this.syntax || (!template.bindingDelegate &&\n          this.element.syntax);\n      var dom = template.createInstance(this, syntax);\n      var observers = dom.bindings_;\n      for (var i = 0; i < observers.length; i++) {\n        this.registerObserver(observers[i]);\n      }\n      return dom;\n    },\n    bind: function(name, observable, oneTime) {\n      var property = this.propertyForAttribute(name);\n      if (!property) {\n        // TODO(sjmiles): this mixin method must use the special form\n        // of `super` installed by `mixinMethod` in declaration/prototype.js\n        return this.mixinSuper(arguments);\n      } else {\n        // use n-way Polymer binding\n        var observer = this.bindProperty(property, observable, oneTime);\n        // NOTE: reflecting binding information is typically required only for\n        // tooling. It has a performance cost so it's opt-in in Node.bind.\n        if (Platform.enableBindingsReflection && observer) {\n          observer.path = observable.path_;\n          this._recordBinding(property, observer);\n        }\n        if (this.reflect[property]) {\n          this.reflectPropertyToAttribute(property);\n        }\n        return observer;\n      }\n    },\n    bindFinished: function() {\n      this.makeElementReady();\n    },\n    _recordBinding: function(name, observer) {\n      this.bindings_ = this.bindings_ || {};\n      this.bindings_[name] = observer;\n    },\n    // TODO(sorvell): unbind/unbindAll has been removed, as public api, from\n    // TemplateBinding. We still need to close/dispose of observers but perhaps\n    // we should choose a more explicit name.\n    asyncUnbindAll: function() {\n      if (!this._unbound) {\n        log.unbind && console.log('[%s] asyncUnbindAll', this.localName);\n        this._unbindAllJob = this.job(this._unbindAllJob, this.unbindAll, 0);\n      }\n    },\n    unbindAll: function() {\n      if (!this._unbound) {\n        this.closeObservers();\n        this.closeNamedObservers();\n        this._unbound = true;\n      }\n    },\n    cancelUnbindAll: function() {\n      if (this._unbound) {\n        log.unbind && console.warn('[%s] already unbound, cannot cancel unbindAll', this.localName);\n        return;\n      }\n      log.unbind && console.log('[%s] cancelUnbindAll', this.localName);\n      if (this._unbindAllJob) {\n        this._unbindAllJob = this._unbindAllJob.stop();\n      }\n    }\n  };\n\n  function unbindNodeTree(node) {\n    forNodeTree(node, _nodeUnbindAll);\n  }\n\n  function _nodeUnbindAll(node) {\n    node.unbindAll();\n  }\n\n  function forNodeTree(node, callback) {\n    if (node) {\n      callback(node);\n      for (var child = node.firstChild; child; child = child.nextSibling) {\n        forNodeTree(child, callback);\n      }\n    }\n  }\n\n  var mustachePattern = /\\{\\{([^{}]*)}}/;\n\n  // exports\n\n  scope.bindPattern = mustachePattern;\n  scope.api.instance.mdv = mdv;\n\n})(Polymer);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function(scope) {\n\n  var base = {\n    PolymerBase: true,\n    job: function(job, callback, wait) {\n      if (typeof job === 'string') {\n        var n = '___' + job;\n        this[n] = Polymer.job.call(this, this[n], callback, wait);\n      } else {\n        return Polymer.job.call(this, job, callback, wait);\n      }\n    },\n    super: Polymer.super,\n    // user entry point for element has had its createdCallback called\n    created: function() {\n    },\n    // user entry point for element has shadowRoot and is ready for\n    // api interaction\n    ready: function() {\n    },\n    createdCallback: function() {\n      if (this.templateInstance && this.templateInstance.model) {\n        console.warn('Attributes on ' + this.localName + ' were data bound ' +\n            'prior to Polymer upgrading the element. This may result in ' +\n            'incorrect binding types.');\n      }\n      this.created();\n      this.prepareElement();\n      if (!this.ownerDocument.isStagingDocument) {\n        this.makeElementReady();\n      }\n    },\n    // system entry point, do not override\n    prepareElement: function() {\n      if (this._elementPrepared) {\n        console.warn('Element already prepared', this.localName);\n        return;\n      }\n      this._elementPrepared = true;\n      // storage for shadowRoots info\n      this.shadowRoots = {};\n      // install property observers\n      this.createPropertyObserver();\n      this.openPropertyObserver();\n      // install boilerplate attributes\n      this.copyInstanceAttributes();\n      // process input attributes\n      this.takeAttributes();\n      // add event listeners\n      this.addHostListeners();\n    },\n    makeElementReady: function() {\n      if (this._readied) {\n        return;\n      }\n      this._readied = true;\n      this.createComputedProperties();\n      // TODO(sorvell): We could create an entry point here\n      // for the user to compute property values.\n      // process declarative resources\n      this.parseDeclarations(this.__proto__);\n      // TODO(sorvell): CE polyfill uses unresolved attribute to simulate\n      // :unresolved; remove this attribute to be compatible with native\n      // CE.\n      this.removeAttribute('unresolved');\n      // user entry point\n      this.ready();\n    },\n    attachedCallback: function() {\n      this.cancelUnbindAll();\n      // invoke user action\n      if (this.attached) {\n        this.attached();\n      }\n      // TODO(sorvell): bc\n      if (this.enteredView) {\n        this.enteredView();\n      }\n      // NOTE: domReady can be used to access elements in dom (descendants,\n      // ancestors, siblings) such that the developer is enured to upgrade\n      // ordering. If the element definitions have loaded, domReady\n      // can be used to access upgraded elements.\n      if (!this.hasBeenAttached) {\n        this.hasBeenAttached = true;\n        if (this.domReady) {\n          this.async('domReady');\n        }\n      }\n    },\n    detachedCallback: function() {\n      if (!this.preventDispose) {\n        this.asyncUnbindAll();\n      }\n      // invoke user action\n      if (this.detached) {\n        this.detached();\n      }\n      // TODO(sorvell): bc\n      if (this.leftView) {\n        this.leftView();\n      }\n    },\n    // TODO(sorvell): bc\n    enteredViewCallback: function() {\n      this.attachedCallback();\n    },\n    // TODO(sorvell): bc\n    leftViewCallback: function() {\n      this.detachedCallback();\n    },\n    // TODO(sorvell): bc\n    enteredDocumentCallback: function() {\n      this.attachedCallback();\n    },\n    // TODO(sorvell): bc\n    leftDocumentCallback: function() {\n      this.detachedCallback();\n    },\n    // recursive ancestral <element> initialization, oldest first\n    parseDeclarations: function(p) {\n      if (p && p.element) {\n        this.parseDeclarations(p.__proto__);\n        p.parseDeclaration.call(this, p.element);\n      }\n    },\n    // parse input <element> as needed, override for custom behavior\n    parseDeclaration: function(elementElement) {\n      var template = this.fetchTemplate(elementElement);\n      if (template) {\n        var root = this.shadowFromTemplate(template);\n        this.shadowRoots[elementElement.name] = root;\n      }\n    },\n    // return a shadow-root template (if desired), override for custom behavior\n    fetchTemplate: function(elementElement) {\n      return elementElement.querySelector('template');\n    },\n    // utility function that creates a shadow root from a <template>\n    shadowFromTemplate: function(template) {\n      if (template) {\n        // make a shadow root\n        var root = this.createShadowRoot();\n        // stamp template\n        // which includes parsing and applying MDV bindings before being\n        // inserted (to avoid {{}} in attribute values)\n        // e.g. to prevent <img src=\"images/{{icon}}\"> from generating a 404.\n        var dom = this.instanceTemplate(template);\n        // append to shadow dom\n        root.appendChild(dom);\n        // perform post-construction initialization tasks on shadow root\n        this.shadowRootReady(root, template);\n        // return the created shadow root\n        return root;\n      }\n    },\n    // utility function that stamps a <template> into light-dom\n    lightFromTemplate: function(template, refNode) {\n      if (template) {\n        // TODO(sorvell): mark this element as an eventController so that\n        // event listeners on bound nodes inside it will be called on it.\n        // Note, the expectation here is that events on all descendants\n        // should be handled by this element.\n        this.eventController = this;\n        // stamp template\n        // which includes parsing and applying MDV bindings before being\n        // inserted (to avoid {{}} in attribute values)\n        // e.g. to prevent <img src=\"images/{{icon}}\"> from generating a 404.\n        var dom = this.instanceTemplate(template);\n        // append to shadow dom\n        if (refNode) {\n          this.insertBefore(dom, refNode);\n        } else {\n          this.appendChild(dom);\n        }\n        // perform post-construction initialization tasks on ahem, light root\n        this.shadowRootReady(this);\n        // return the created shadow root\n        return dom;\n      }\n    },\n    shadowRootReady: function(root) {\n      // locate nodes with id and store references to them in this.$ hash\n      this.marshalNodeReferences(root);\n    },\n    // locate nodes with id and store references to them in this.$ hash\n    marshalNodeReferences: function(root) {\n      // establish $ instance variable\n      var $ = this.$ = this.$ || {};\n      // populate $ from nodes with ID from the LOCAL tree\n      if (root) {\n        var n$ = root.querySelectorAll(\"[id]\");\n        for (var i=0, l=n$.length, n; (i<l) && (n=n$[i]); i++) {\n          $[n.id] = n;\n        };\n      }\n    },\n    attributeChangedCallback: function(name, oldValue) {\n      // TODO(sjmiles): adhoc filter\n      if (name !== 'class' && name !== 'style') {\n        this.attributeToProperty(name, this.getAttribute(name));\n      }\n      if (this.attributeChanged) {\n        this.attributeChanged.apply(this, arguments);\n      }\n    },\n    onMutation: function(node, listener) {\n      var observer = new MutationObserver(function(mutations) {\n        listener.call(this, observer, mutations);\n        observer.disconnect();\n      }.bind(this));\n      observer.observe(node, {childList: true, subtree: true});\n    }\n  };\n\n  // true if object has own PolymerBase api\n  function isBase(object) {\n    return object.hasOwnProperty('PolymerBase')\n  }\n\n  // name a base constructor for dev tools\n\n  function PolymerBase() {};\n  PolymerBase.prototype = base;\n  base.constructor = PolymerBase;\n\n  // exports\n\n  scope.Base = PolymerBase;\n  scope.isBase = isBase;\n  scope.api.instance.base = base;\n\n})(Polymer);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function(scope) {\n\n  // imports\n\n  var log = window.logFlags || {};\n  var hasShadowDOMPolyfill = window.ShadowDOMPolyfill;\n\n  // magic words\n  \n  var STYLE_SCOPE_ATTRIBUTE = 'element';\n  var STYLE_CONTROLLER_SCOPE = 'controller';\n  \n  var styles = {\n    STYLE_SCOPE_ATTRIBUTE: STYLE_SCOPE_ATTRIBUTE,\n    /**\n     * Installs external stylesheets and <style> elements with the attribute \n     * polymer-scope='controller' into the scope of element. This is intended\n     * to be a called during custom element construction.\n    */\n    installControllerStyles: function() {\n      // apply controller styles, but only if they are not yet applied\n      var scope = this.findStyleScope();\n      if (scope && !this.scopeHasNamedStyle(scope, this.localName)) {\n        // allow inherited controller styles\n        var proto = getPrototypeOf(this), cssText = '';\n        while (proto && proto.element) {\n          cssText += proto.element.cssTextForScope(STYLE_CONTROLLER_SCOPE);\n          proto = getPrototypeOf(proto);\n        }\n        if (cssText) {\n          this.installScopeCssText(cssText, scope);\n        }\n      }\n    },\n    installScopeStyle: function(style, name, scope) {\n      var scope = scope || this.findStyleScope(), name = name || '';\n      if (scope && !this.scopeHasNamedStyle(scope, this.localName + name)) {\n        var cssText = '';\n        if (style instanceof Array) {\n          for (var i=0, l=style.length, s; (i<l) && (s=style[i]); i++) {\n            cssText += s.textContent + '\\n\\n';\n          }\n        } else {\n          cssText = style.textContent;\n        }\n        this.installScopeCssText(cssText, scope, name);\n      }\n    },\n    installScopeCssText: function(cssText, scope, name) {\n      scope = scope || this.findStyleScope();\n      name = name || '';\n      if (!scope) {\n        return;\n      }\n      if (hasShadowDOMPolyfill) {\n        cssText = shimCssText(cssText, scope.host);\n      }\n      var style = this.element.cssTextToScopeStyle(cssText,\n          STYLE_CONTROLLER_SCOPE);\n      Polymer.applyStyleToScope(style, scope);\n      // cache that this style has been applied\n      this.styleCacheForScope(scope)[this.localName + name] = true;\n    },\n    findStyleScope: function(node) {\n      // find the shadow root that contains this element\n      var n = node || this;\n      while (n.parentNode) {\n        n = n.parentNode;\n      }\n      return n;\n    },\n    scopeHasNamedStyle: function(scope, name) {\n      var cache = this.styleCacheForScope(scope);\n      return cache[name];\n    },\n    styleCacheForScope: function(scope) {\n      if (hasShadowDOMPolyfill) {\n        var scopeName = scope.host ? scope.host.localName : scope.localName;\n        return polyfillScopeStyleCache[scopeName] || (polyfillScopeStyleCache[scopeName] = {});\n      } else {\n        return scope._scopeStyles = (scope._scopeStyles || {});\n      }\n    }\n  };\n\n  var polyfillScopeStyleCache = {};\n  \n  // NOTE: use raw prototype traversal so that we ensure correct traversal\n  // on platforms where the protoype chain is simulated via __proto__ (IE10)\n  function getPrototypeOf(prototype) {\n    return prototype.__proto__;\n  }\n\n  function shimCssText(cssText, host) {\n    var name = '', is = false;\n    if (host) {\n      name = host.localName;\n      is = host.hasAttribute('is');\n    }\n    var selector = Platform.ShadowCSS.makeScopeSelector(name, is);\n    return Platform.ShadowCSS.shimCssText(cssText, selector);\n  }\n\n  // exports\n\n  scope.api.instance.styles = styles;\n  \n})(Polymer);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function(scope) {\n\n  // imports\n\n  var extend = scope.extend;\n  var api = scope.api;\n\n  // imperative implementation: Polymer()\n\n  // specify an 'own' prototype for tag `name`\n  function element(name, prototype) {\n    if (arguments.length === 1 && typeof arguments[0] !== 'string') {\n      prototype = name;\n      var script = document._currentScript;\n      name = script && script.parentNode && script.parentNode.getAttribute ?\n          script.parentNode.getAttribute('name') : '';\n      if (!name) {\n        throw 'Element name could not be inferred.';\n      }\n    }\n    if (getRegisteredPrototype[name]) {\n      throw 'Already registered (Polymer) prototype for element ' + name;\n    }\n    // cache the prototype\n    registerPrototype(name, prototype);\n    // notify the registrar waiting for 'name', if any\n    notifyPrototype(name);\n  }\n\n  // async prototype source\n\n  function waitingForPrototype(name, client) {\n    waitPrototype[name] = client;\n  }\n\n  var waitPrototype = {};\n\n  function notifyPrototype(name) {\n    if (waitPrototype[name]) {\n      waitPrototype[name].registerWhenReady();\n      delete waitPrototype[name];\n    }\n  }\n\n  // utility and bookkeeping\n\n  // maps tag names to prototypes, as registered with\n  // Polymer. Prototypes associated with a tag name\n  // using document.registerElement are available from\n  // HTMLElement.getPrototypeForTag().\n  // If an element was fully registered by Polymer, then\n  // Polymer.getRegisteredPrototype(name) === \n  //   HTMLElement.getPrototypeForTag(name)\n\n  var prototypesByName = {};\n\n  function registerPrototype(name, prototype) {\n    return prototypesByName[name] = prototype || {};\n  }\n\n  function getRegisteredPrototype(name) {\n    return prototypesByName[name];\n  }\n\n  // exports\n\n  scope.getRegisteredPrototype = getRegisteredPrototype;\n  scope.waitingForPrototype = waitingForPrototype;\n\n  // namespace shenanigans so we can expose our scope on the registration \n  // function\n\n  // make window.Polymer reference `element()`\n\n  window.Polymer = element;\n\n  // TODO(sjmiles): find a way to do this that is less terrible\n  // copy window.Polymer properties onto `element()`\n\n  extend(Polymer, scope);\n\n  // Under the HTMLImports polyfill, scripts in the main document\n  // do not block on imports; we want to allow calls to Polymer in the main\n  // document. Platform collects those calls until we can process them, which\n  // we do here.\n\n  var declarations = Platform.deliverDeclarations();\n  if (declarations) {\n    for (var i=0, l=declarations.length, d; (i<l) && (d=declarations[i]); i++) {\n      element.apply(null, d);\n    }\n  }\n\n})(Polymer);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function(scope) {\n\nvar path = {\n  resolveElementPaths: function(node) {\n    Platform.urlResolver.resolveDom(node);\n  },\n  addResolvePathApi: function() {\n    // let assetpath attribute modify the resolve path\n    var assetPath = this.getAttribute('assetpath') || '';\n    var root = new URL(assetPath, this.ownerDocument.baseURI);\n    this.prototype.resolvePath = function(urlPath, base) {\n      var u = new URL(urlPath, base || root);\n      return u.href;\n    };\n  }\n};\n\n// exports\nscope.api.declaration.path = path;\n\n})(Polymer);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function(scope) {\n\n  // imports\n\n  var log = window.logFlags || {};\n  var api = scope.api.instance.styles;\n  var STYLE_SCOPE_ATTRIBUTE = api.STYLE_SCOPE_ATTRIBUTE;\n\n  var hasShadowDOMPolyfill = window.ShadowDOMPolyfill;\n\n  // magic words\n\n  var STYLE_SELECTOR = 'style';\n  var STYLE_LOADABLE_MATCH = '@import';\n  var SHEET_SELECTOR = 'link[rel=stylesheet]';\n  var STYLE_GLOBAL_SCOPE = 'global';\n  var SCOPE_ATTR = 'polymer-scope';\n\n  var styles = {\n    // returns true if resources are loading\n    loadStyles: function(callback) {\n      var template = this.fetchTemplate();\n      var content = template && this.templateContent();\n      if (content) {\n        this.convertSheetsToStyles(content);\n        var styles = this.findLoadableStyles(content);\n        if (styles.length) {\n          var templateUrl = template.ownerDocument.baseURI;\n          return Platform.styleResolver.loadStyles(styles, templateUrl, callback);\n        }\n      }\n      if (callback) {\n        callback();\n      }\n    },\n    convertSheetsToStyles: function(root) {\n      var s$ = root.querySelectorAll(SHEET_SELECTOR);\n      for (var i=0, l=s$.length, s, c; (i<l) && (s=s$[i]); i++) {\n        c = createStyleElement(importRuleForSheet(s, this.ownerDocument.baseURI),\n            this.ownerDocument);\n        this.copySheetAttributes(c, s);\n        s.parentNode.replaceChild(c, s);\n      }\n    },\n    copySheetAttributes: function(style, link) {\n      for (var i=0, a$=link.attributes, l=a$.length, a; (a=a$[i]) && i<l; i++) {\n        if (a.name !== 'rel' && a.name !== 'href') {\n          style.setAttribute(a.name, a.value);\n        }\n      }\n    },\n    findLoadableStyles: function(root) {\n      var loadables = [];\n      if (root) {\n        var s$ = root.querySelectorAll(STYLE_SELECTOR);\n        for (var i=0, l=s$.length, s; (i<l) && (s=s$[i]); i++) {\n          if (s.textContent.match(STYLE_LOADABLE_MATCH)) {\n            loadables.push(s);\n          }\n        }\n      }\n      return loadables;\n    },\n    /**\n     * Install external stylesheets loaded in <polymer-element> elements into the \n     * element's template.\n     * @param elementElement The <element> element to style.\n     */\n    installSheets: function() {\n      this.cacheSheets();\n      this.cacheStyles();\n      this.installLocalSheets();\n      this.installGlobalStyles();\n    },\n    /**\n     * Remove all sheets from element and store for later use.\n     */\n    cacheSheets: function() {\n      this.sheets = this.findNodes(SHEET_SELECTOR);\n      this.sheets.forEach(function(s) {\n        if (s.parentNode) {\n          s.parentNode.removeChild(s);\n        }\n      });\n    },\n    cacheStyles: function() {\n      this.styles = this.findNodes(STYLE_SELECTOR + '[' + SCOPE_ATTR + ']');\n      this.styles.forEach(function(s) {\n        if (s.parentNode) {\n          s.parentNode.removeChild(s);\n        }\n      });\n    },\n    /**\n     * Takes external stylesheets loaded in an <element> element and moves\n     * their content into a <style> element inside the <element>'s template.\n     * The sheet is then removed from the <element>. This is done only so \n     * that if the element is loaded in the main document, the sheet does\n     * not become active.\n     * Note, ignores sheets with the attribute 'polymer-scope'.\n     * @param elementElement The <element> element to style.\n     */\n    installLocalSheets: function () {\n      var sheets = this.sheets.filter(function(s) {\n        return !s.hasAttribute(SCOPE_ATTR);\n      });\n      var content = this.templateContent();\n      if (content) {\n        var cssText = '';\n        sheets.forEach(function(sheet) {\n          cssText += cssTextFromSheet(sheet) + '\\n';\n        });\n        if (cssText) {\n          var style = createStyleElement(cssText, this.ownerDocument);\n          content.insertBefore(style, content.firstChild);\n        }\n      }\n    },\n    findNodes: function(selector, matcher) {\n      var nodes = this.querySelectorAll(selector).array();\n      var content = this.templateContent();\n      if (content) {\n        var templateNodes = content.querySelectorAll(selector).array();\n        nodes = nodes.concat(templateNodes);\n      }\n      return matcher ? nodes.filter(matcher) : nodes;\n    },\n    /**\n     * Promotes external stylesheets and <style> elements with the attribute \n     * polymer-scope='global' into global scope.\n     * This is particularly useful for defining @keyframe rules which \n     * currently do not function in scoped or shadow style elements.\n     * (See wkb.ug/72462)\n     * @param elementElement The <element> element to style.\n    */\n    // TODO(sorvell): remove when wkb.ug/72462 is addressed.\n    installGlobalStyles: function() {\n      var style = this.styleForScope(STYLE_GLOBAL_SCOPE);\n      applyStyleToScope(style, document.head);\n    },\n    cssTextForScope: function(scopeDescriptor) {\n      var cssText = '';\n      // handle stylesheets\n      var selector = '[' + SCOPE_ATTR + '=' + scopeDescriptor + ']';\n      var matcher = function(s) {\n        return matchesSelector(s, selector);\n      };\n      var sheets = this.sheets.filter(matcher);\n      sheets.forEach(function(sheet) {\n        cssText += cssTextFromSheet(sheet) + '\\n\\n';\n      });\n      // handle cached style elements\n      var styles = this.styles.filter(matcher);\n      styles.forEach(function(style) {\n        cssText += style.textContent + '\\n\\n';\n      });\n      return cssText;\n    },\n    styleForScope: function(scopeDescriptor) {\n      var cssText = this.cssTextForScope(scopeDescriptor);\n      return this.cssTextToScopeStyle(cssText, scopeDescriptor);\n    },\n    cssTextToScopeStyle: function(cssText, scopeDescriptor) {\n      if (cssText) {\n        var style = createStyleElement(cssText);\n        style.setAttribute(STYLE_SCOPE_ATTRIBUTE, this.getAttribute('name') +\n            '-' + scopeDescriptor);\n        return style;\n      }\n    }\n  };\n\n  function importRuleForSheet(sheet, baseUrl) {\n    var href = new URL(sheet.getAttribute('href'), baseUrl).href;\n    return '@import \\'' + href + '\\';';\n  }\n\n  function applyStyleToScope(style, scope) {\n    if (style) {\n      if (scope === document) {\n        scope = document.head;\n      }\n      if (hasShadowDOMPolyfill) {\n        scope = document.head;\n      }\n      // TODO(sorvell): necessary for IE\n      // see https://connect.microsoft.com/IE/feedback/details/790212/\n      // cloning-a-style-element-and-adding-to-document-produces\n      // -unexpected-result#details\n      // var clone = style.cloneNode(true);\n      var clone = createStyleElement(style.textContent);\n      var attr = style.getAttribute(STYLE_SCOPE_ATTRIBUTE);\n      if (attr) {\n        clone.setAttribute(STYLE_SCOPE_ATTRIBUTE, attr);\n      }\n      // TODO(sorvell): probably too brittle; try to figure out \n      // where to put the element.\n      var refNode = scope.firstElementChild;\n      if (scope === document.head) {\n        var selector = 'style[' + STYLE_SCOPE_ATTRIBUTE + ']';\n        var s$ = document.head.querySelectorAll(selector);\n        if (s$.length) {\n          refNode = s$[s$.length-1].nextElementSibling;\n        }\n      }\n      scope.insertBefore(clone, refNode);\n    }\n  }\n\n  function createStyleElement(cssText, scope) {\n    scope = scope || document;\n    scope = scope.createElement ? scope : scope.ownerDocument;\n    var style = scope.createElement('style');\n    style.textContent = cssText;\n    return style;\n  }\n\n  function cssTextFromSheet(sheet) {\n    return (sheet && sheet.__resource) || '';\n  }\n\n  function matchesSelector(node, inSelector) {\n    if (matches) {\n      return matches.call(node, inSelector);\n    }\n  }\n  var p = HTMLElement.prototype;\n  var matches = p.matches || p.matchesSelector || p.webkitMatchesSelector \n      || p.mozMatchesSelector;\n  \n  // exports\n\n  scope.api.declaration.styles = styles;\n  scope.applyStyleToScope = applyStyleToScope;\n  \n})(Polymer);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function(scope) {\n\n  // imports\n\n  var log = window.logFlags || {};\n  var api = scope.api.instance.events;\n  var EVENT_PREFIX = api.EVENT_PREFIX;\n  // polymer-element declarative api: events feature\n\n  var mixedCaseEventTypes = {};\n  [\n    'webkitAnimationStart',\n    'webkitAnimationEnd',\n    'webkitTransitionEnd',\n    'DOMFocusOut',\n    'DOMFocusIn',\n    'DOMMouseScroll'\n  ].forEach(function(e) {\n    mixedCaseEventTypes[e.toLowerCase()] = e;\n  });\n\n  var events = {\n    parseHostEvents: function() {\n      // our delegates map\n      var delegates = this.prototype.eventDelegates;\n      // extract data from attributes into delegates\n      this.addAttributeDelegates(delegates);\n    },\n    addAttributeDelegates: function(delegates) {\n      // for each attribute\n      for (var i=0, a; a=this.attributes[i]; i++) {\n        // does it have magic marker identifying it as an event delegate?\n        if (this.hasEventPrefix(a.name)) {\n          // if so, add the info to delegates\n          delegates[this.removeEventPrefix(a.name)] = a.value.replace('{{', '')\n              .replace('}}', '').trim();\n        }\n      }\n    },\n    // starts with 'on-'\n    hasEventPrefix: function (n) {\n      return n && (n[0] === 'o') && (n[1] === 'n') && (n[2] === '-');\n    },\n    removeEventPrefix: function(n) {\n      return n.slice(prefixLength);\n    },\n    findController: function(node) {\n      while (node.parentNode) {\n        if (node.eventController) {\n          return node.eventController;\n        }\n        node = node.parentNode;\n      }\n      return node.host;\n    },\n    getEventHandler: function(controller, target, method) {\n      var events = this;\n      return function(e) {\n        if (!controller || !controller.PolymerBase) {\n          controller = events.findController(target);\n        }\n\n        var args = [e, e.detail, e.currentTarget];\n        controller.dispatchMethod(controller, method, args);\n      };\n    },\n    prepareEventBinding: function(pathString, name, node) {\n      if (!this.hasEventPrefix(name))\n        return;\n\n      var eventType = this.removeEventPrefix(name);\n      eventType = mixedCaseEventTypes[eventType] || eventType;\n\n      var events = this;\n\n      return function(model, node, oneTime) {\n        var handler = events.getEventHandler(undefined, node, pathString);\n        PolymerGestures.addEventListener(node, eventType, handler);\n\n        if (oneTime)\n          return;\n\n        // TODO(rafaelw): This is really pointless work. Aside from the cost\n        // of these allocations, NodeBind is going to setAttribute back to its\n        // current value. Fixing this would mean changing the TemplateBinding\n        // binding delegate API.\n        function bindingValue() {\n          return '{{ ' + pathString + ' }}';\n        }\n\n        return {\n          open: bindingValue,\n          discardChanges: bindingValue,\n          close: function() {\n            PolymerGestures.removeEventListener(node, eventType, handler);\n          }\n        };\n      };\n    }\n  };\n\n  var prefixLength = EVENT_PREFIX.length;\n\n  // exports\n  scope.api.declaration.events = events;\n\n})(Polymer);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function(scope) {\n\n  // element api\n\n  var properties = {\n    inferObservers: function(prototype) {\n      // called before prototype.observe is chained to inherited object\n      var observe = prototype.observe, property;\n      for (var n in prototype) {\n        if (n.slice(-7) === 'Changed') {\n          if (!observe) {\n            observe  = (prototype.observe = {});\n          }\n          property = n.slice(0, -7)\n          observe[property] = observe[property] || n;\n        }\n      }\n    },\n    explodeObservers: function(prototype) {\n      // called before prototype.observe is chained to inherited object\n      var o = prototype.observe;\n      if (o) {\n        var exploded = {};\n        for (var n in o) {\n          var names = n.split(' ');\n          for (var i=0, ni; ni=names[i]; i++) {\n            exploded[ni] = o[n];\n          }\n        }\n        prototype.observe = exploded;\n      }\n    },\n    optimizePropertyMaps: function(prototype) {\n      if (prototype.observe) {\n        // construct name list\n        var a = prototype._observeNames = [];\n        for (var n in prototype.observe) {\n          var names = n.split(' ');\n          for (var i=0, ni; ni=names[i]; i++) {\n            a.push(ni);\n          }\n        }\n      }\n      if (prototype.publish) {\n        // construct name list\n        var a = prototype._publishNames = [];\n        for (var n in prototype.publish) {\n          a.push(n);\n        }\n      }\n      if (prototype.computed) {\n        // construct name list\n        var a = prototype._computedNames = [];\n        for (var n in prototype.computed) {\n          a.push(n);\n        }\n      }\n    },\n    publishProperties: function(prototype, base) {\n      // if we have any properties to publish\n      var publish = prototype.publish;\n      if (publish) {\n        // transcribe `publish` entries onto own prototype\n        this.requireProperties(publish, prototype, base);\n        // construct map of lower-cased property names\n        prototype._publishLC = this.lowerCaseMap(publish);\n      }\n    },\n    //\n    // `name: value` entries in the `publish` object may need to generate \n    // matching properties on the prototype.\n    //\n    // Values that are objects may have a `reflect` property, which\n    // signals that the value describes property control metadata.\n    // In metadata objects, the prototype default value (if any)\n    // is encoded in the `value` property.\n    //\n    // publish: {\n    //   foo: 5, \n    //   bar: {value: true, reflect: true},\n    //   zot: {}\n    // }\n    //\n    // `reflect` metadata property controls whether changes to the property\n    // are reflected back to the attribute (default false). \n    //\n    // A value is stored on the prototype unless it's === `undefined`,\n    // in which case the base chain is checked for a value.\n    // If the basal value is also undefined, `null` is stored on the prototype.\n    //\n    // The reflection data is stored on another prototype object, `reflect`\n    // which also can be specified directly.\n    //\n    // reflect: {\n    //   foo: true\n    // }\n    //\n    requireProperties: function(propertyInfos, prototype, base) {\n      // per-prototype storage for reflected properties\n      prototype.reflect = prototype.reflect || {};\n      // ensure a prototype value for each property\n      // and update the property's reflect to attribute status\n      for (var n in propertyInfos) {\n        var value = propertyInfos[n];\n        // value has metadata if it has a `reflect` property\n        if (value && value.reflect !== undefined) {\n          prototype.reflect[n] = Boolean(value.reflect);\n          value = value.value;\n        }\n        // only set a value if one is specified\n        if (value !== undefined) {\n          prototype[n] = value;\n        }\n      }\n    },\n    lowerCaseMap: function(properties) {\n      var map = {};\n      for (var n in properties) {\n        map[n.toLowerCase()] = n;\n      }\n      return map;\n    },\n    createPropertyAccessor: function(name) {\n      var proto = this.prototype;\n\n      var privateName = name + '_';\n      var privateObservable  = name + 'Observable_';\n      proto[privateName] = proto[name];\n\n      Object.defineProperty(proto, name, {\n        get: function() {\n          var observable = this[privateObservable];\n          if (observable)\n            observable.deliver();\n\n          return this[privateName];\n        },\n        set: function(value) {\n          var observable = this[privateObservable];\n          if (observable) {\n            observable.setValue(value);\n            return;\n          }\n\n          var oldValue = this[privateName];\n          this[privateName] = value;\n          this.emitPropertyChangeRecord(name, value, oldValue);\n\n          return value;\n        },\n        configurable: true\n      });\n    },\n    createPropertyAccessors: function(prototype) {\n      var n$ = prototype._publishNames;\n      if (n$ && n$.length) {\n        for (var i=0, l=n$.length, n, fn; (i<l) && (n=n$[i]); i++) {\n          this.createPropertyAccessor(n);\n        }\n      }\n      var n$ = prototype._computedNames;\n      if (n$ && n$.length) {\n        for (var i=0, l=n$.length, n, fn; (i<l) && (n=n$[i]); i++) {\n          this.createPropertyAccessor(n);\n        }\n      }\n    }\n  };\n\n  // exports\n\n  scope.api.declaration.properties = properties;\n\n})(Polymer);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n(function(scope) {\n\n  // magic words\n\n  var ATTRIBUTES_ATTRIBUTE = 'attributes';\n  var ATTRIBUTES_REGEX = /\\s|,/;\n\n  // attributes api\n\n  var attributes = {\n    \n    inheritAttributesObjects: function(prototype) {\n      // chain our lower-cased publish map to the inherited version\n      this.inheritObject(prototype, 'publishLC');\n      // chain our instance attributes map to the inherited version\n      this.inheritObject(prototype, '_instanceAttributes');\n    },\n\n    publishAttributes: function(prototype, base) {\n      // merge names from 'attributes' attribute into the 'publish' object\n      var attributes = this.getAttribute(ATTRIBUTES_ATTRIBUTE);\n      if (attributes) {\n        // create a `publish` object if needed.\n        // the `publish` object is only relevant to this prototype, the \n        // publishing logic in `declaration/properties.js` is responsible for\n        // managing property values on the prototype chain.\n        // TODO(sjmiles): the `publish` object is later chained to it's \n        //                ancestor object, presumably this is only for \n        //                reflection or other non-library uses. \n        var publish = prototype.publish || (prototype.publish = {}); \n        // names='a b c' or names='a,b,c'\n        var names = attributes.split(ATTRIBUTES_REGEX);\n        // record each name for publishing\n        for (var i=0, l=names.length, n; i<l; i++) {\n          // remove excess ws\n          n = names[i].trim();\n          // looks weird, but causes n to exist on `publish` if it does not;\n          // a more careful test would need expensive `in` operator\n          if (n && publish[n] === undefined) {\n            publish[n] = undefined;\n          }\n        }\n      }\n    },\n\n    // record clonable attributes from <element>\n    accumulateInstanceAttributes: function() {\n      // inherit instance attributes\n      var clonable = this.prototype._instanceAttributes;\n      // merge attributes from element\n      var a$ = this.attributes;\n      for (var i=0, l=a$.length, a; (i<l) && (a=a$[i]); i++) {  \n        if (this.isInstanceAttribute(a.name)) {\n          clonable[a.name] = a.value;\n        }\n      }\n    },\n\n    isInstanceAttribute: function(name) {\n      return !this.blackList[name] && name.slice(0,3) !== 'on-';\n    },\n\n    // do not clone these attributes onto instances\n    blackList: {\n      name: 1,\n      'extends': 1,\n      constructor: 1,\n      noscript: 1,\n      assetpath: 1,\n      'cache-csstext': 1\n    }\n    \n  };\n\n  // add ATTRIBUTES_ATTRIBUTE to the blacklist\n  attributes.blackList[ATTRIBUTES_ATTRIBUTE] = 1;\n\n  // exports\n\n  scope.api.declaration.attributes = attributes;\n\n})(Polymer);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function(scope) {\n\n  // imports\n  var events = scope.api.declaration.events;\n\n  var syntax = new PolymerExpressions();\n  var prepareBinding = syntax.prepareBinding;\n\n  // Polymer takes a first crack at the binding to see if it's a declarative\n  // event handler.\n  syntax.prepareBinding = function(pathString, name, node) {\n    return events.prepareEventBinding(pathString, name, node) ||\n           prepareBinding.call(syntax, pathString, name, node);\n  };\n\n  // declaration api supporting mdv\n  var mdv = {\n    syntax: syntax,\n    fetchTemplate: function() {\n      return this.querySelector('template');\n    },\n    templateContent: function() {\n      var template = this.fetchTemplate();\n      return template && Platform.templateContent(template);\n    },\n    installBindingDelegate: function(template) {\n      if (template) {\n        template.bindingDelegate = this.syntax;\n      }\n    }\n  };\n\n  // exports\n  scope.api.declaration.mdv = mdv;\n\n})(Polymer);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function(scope) {\n\n  // imports\n  \n  var api = scope.api;\n  var isBase = scope.isBase;\n  var extend = scope.extend;\n\n  var hasShadowDOMPolyfill = window.ShadowDOMPolyfill;\n\n  // prototype api\n\n  var prototype = {\n\n    register: function(name, extendeeName) {\n      // build prototype combining extendee, Polymer base, and named api\n      this.buildPrototype(name, extendeeName);\n      // register our custom element with the platform\n      this.registerPrototype(name, extendeeName);\n      // reference constructor in a global named by 'constructor' attribute\n      this.publishConstructor();\n    },\n\n    buildPrototype: function(name, extendeeName) {\n      // get our custom prototype (before chaining)\n      var extension = scope.getRegisteredPrototype(name);\n      // get basal prototype\n      var base = this.generateBasePrototype(extendeeName);\n      // implement declarative features\n      this.desugarBeforeChaining(extension, base);\n      // join prototypes\n      this.prototype = this.chainPrototypes(extension, base);\n      // more declarative features\n      this.desugarAfterChaining(name, extendeeName);\n    },\n\n    desugarBeforeChaining: function(prototype, base) {\n      // back reference declaration element\n      // TODO(sjmiles): replace `element` with `elementElement` or `declaration`\n      prototype.element = this;\n      // transcribe `attributes` declarations onto own prototype's `publish`\n      this.publishAttributes(prototype, base);\n      // `publish` properties to the prototype and to attribute watch\n      this.publishProperties(prototype, base);\n      // infer observers for `observe` list based on method names\n      this.inferObservers(prototype);\n      // desugar compound observer syntax, e.g. 'a b c' \n      this.explodeObservers(prototype);\n    },\n\n    chainPrototypes: function(prototype, base) {\n      // chain various meta-data objects to inherited versions\n      this.inheritMetaData(prototype, base);\n      // chain custom api to inherited\n      var chained = this.chainObject(prototype, base);\n      // x-platform fixup\n      ensurePrototypeTraversal(chained);\n      return chained;\n    },\n\n    inheritMetaData: function(prototype, base) {\n      // chain observe object to inherited\n      this.inheritObject('observe', prototype, base);\n      // chain publish object to inherited\n      this.inheritObject('publish', prototype, base);\n      // chain reflect object to inherited\n      this.inheritObject('reflect', prototype, base);\n      // chain our lower-cased publish map to the inherited version\n      this.inheritObject('_publishLC', prototype, base);\n      // chain our instance attributes map to the inherited version\n      this.inheritObject('_instanceAttributes', prototype, base);\n      // chain our event delegates map to the inherited version\n      this.inheritObject('eventDelegates', prototype, base);\n    },\n\n    // implement various declarative features\n    desugarAfterChaining: function(name, extendee) {\n      // build side-chained lists to optimize iterations\n      this.optimizePropertyMaps(this.prototype);\n      this.createPropertyAccessors(this.prototype);\n      // install mdv delegate on template\n      this.installBindingDelegate(this.fetchTemplate());\n      // install external stylesheets as if they are inline\n      this.installSheets();\n      // adjust any paths in dom from imports\n      this.resolveElementPaths(this);\n      // compile list of attributes to copy to instances\n      this.accumulateInstanceAttributes();\n      // parse on-* delegates declared on `this` element\n      this.parseHostEvents();\n      //\n      // install a helper method this.resolvePath to aid in \n      // setting resource urls. e.g.\n      // this.$.image.src = this.resolvePath('images/foo.png')\n      this.addResolvePathApi();\n      // under ShadowDOMPolyfill, transforms to approximate missing CSS features\n      if (hasShadowDOMPolyfill) {\n        Platform.ShadowCSS.shimStyling(this.templateContent(), name, extendee);\n      }\n      // allow custom element access to the declarative context\n      if (this.prototype.registerCallback) {\n        this.prototype.registerCallback(this);\n      }\n    },\n\n    // if a named constructor is requested in element, map a reference\n    // to the constructor to the given symbol\n    publishConstructor: function() {\n      var symbol = this.getAttribute('constructor');\n      if (symbol) {\n        window[symbol] = this.ctor;\n      }\n    },\n\n    // build prototype combining extendee, Polymer base, and named api\n    generateBasePrototype: function(extnds) {\n      var prototype = this.findBasePrototype(extnds);\n      if (!prototype) {\n        // create a prototype based on tag-name extension\n        var prototype = HTMLElement.getPrototypeForTag(extnds);\n        // insert base api in inheritance chain (if needed)\n        prototype = this.ensureBaseApi(prototype);\n        // memoize this base\n        memoizedBases[extnds] = prototype;\n      }\n      return prototype;\n    },\n\n    findBasePrototype: function(name) {\n      return memoizedBases[name];\n    },\n\n    // install Polymer instance api into prototype chain, as needed \n    ensureBaseApi: function(prototype) {\n      if (prototype.PolymerBase) {\n        return prototype;\n      }\n      var extended = Object.create(prototype);\n      // we need a unique copy of base api for each base prototype\n      // therefore we 'extend' here instead of simply chaining\n      api.publish(api.instance, extended);\n      // TODO(sjmiles): sharing methods across prototype chains is\n      // not supported by 'super' implementation which optimizes\n      // by memoizing prototype relationships.\n      // Probably we should have a version of 'extend' that is \n      // share-aware: it could study the text of each function,\n      // look for usage of 'super', and wrap those functions in\n      // closures.\n      // As of now, there is only one problematic method, so \n      // we just patch it manually.\n      // To avoid re-entrancy problems, the special super method\n      // installed is called `mixinSuper` and the mixin method\n      // must use this method instead of the default `super`.\n      this.mixinMethod(extended, prototype, api.instance.mdv, 'bind');\n      // return buffed-up prototype\n      return extended;\n    },\n\n    mixinMethod: function(extended, prototype, api, name) {\n      var $super = function(args) {\n        return prototype[name].apply(this, args);\n      };\n      extended[name] = function() {\n        this.mixinSuper = $super;\n        return api[name].apply(this, arguments);\n      }\n    },\n\n    // ensure prototype[name] inherits from a prototype.prototype[name]\n    inheritObject: function(name, prototype, base) {\n      // require an object\n      var source = prototype[name] || {};\n      // chain inherited properties onto a new object\n      prototype[name] = this.chainObject(source, base[name]);\n    },\n\n    // register 'prototype' to custom element 'name', store constructor \n    registerPrototype: function(name, extendee) { \n      var info = {\n        prototype: this.prototype\n      }\n      // native element must be specified in extends\n      var typeExtension = this.findTypeExtension(extendee);\n      if (typeExtension) {\n        info.extends = typeExtension;\n      }\n      // register the prototype with HTMLElement for name lookup\n      HTMLElement.register(name, this.prototype);\n      // register the custom type\n      this.ctor = document.registerElement(name, info);\n    },\n\n    findTypeExtension: function(name) {\n      if (name && name.indexOf('-') < 0) {\n        return name;\n      } else {\n        var p = this.findBasePrototype(name);\n        if (p.element) {\n          return this.findTypeExtension(p.element.extends);\n        }\n      }\n    }\n\n  };\n\n  // memoize base prototypes\n  var memoizedBases = {};\n\n  // implementation of 'chainObject' depends on support for __proto__\n  if (Object.__proto__) {\n    prototype.chainObject = function(object, inherited) {\n      if (object && inherited && object !== inherited) {\n        object.__proto__ = inherited;\n      }\n      return object;\n    }\n  } else {\n    prototype.chainObject = function(object, inherited) {\n      if (object && inherited && object !== inherited) {\n        var chained = Object.create(inherited);\n        object = extend(chained, object);\n      }\n      return object;\n    }\n  }\n\n  // On platforms that do not support __proto__ (versions of IE), the prototype\n  // chain of a custom element is simulated via installation of __proto__.\n  // Although custom elements manages this, we install it here so it's\n  // available during desugaring.\n  function ensurePrototypeTraversal(prototype) {\n    if (!Object.__proto__) {\n      var ancestor = Object.getPrototypeOf(prototype);\n      prototype.__proto__ = ancestor;\n      if (isBase(ancestor)) {\n        ancestor.__proto__ = Object.getPrototypeOf(ancestor);\n      }\n    }\n  }\n\n  // exports\n\n  api.declaration.prototype = prototype;\n\n})(Polymer);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function(scope) {\n\n  /*\n\n    Elements are added to a registration queue so that they register in \n    the proper order at the appropriate time. We do this for a few reasons:\n\n    * to enable elements to load resources (like stylesheets) \n    asynchronously. We need to do this until the platform provides an efficient\n    alternative. One issue is that remote @import stylesheets are \n    re-fetched whenever stamped into a shadowRoot.\n\n    * to ensure elements loaded 'at the same time' (e.g. via some set of\n    imports) are registered as a batch. This allows elements to be enured from\n    upgrade ordering as long as they query the dom tree 1 task after\n    upgrade (aka domReady). This is a performance tradeoff. On the one hand,\n    elements that could register while imports are loading are prevented from \n    doing so. On the other, grouping upgrades into a single task means less\n    incremental work (for example style recalcs),  Also, we can ensure the \n    document is in a known state at the single quantum of time when \n    elements upgrade.\n\n  */\n  var queue = {\n\n    // tell the queue to wait for an element to be ready\n    wait: function(element) {\n      if (!element.__queue) {\n        element.__queue = {};\n        elements.push(element);\n      }\n    },\n\n    // enqueue an element to the next spot in the queue.\n    enqueue: function(element, check, go) {\n      var shouldAdd = element.__queue && !element.__queue.check;\n      if (shouldAdd) {\n        queueForElement(element).push(element);\n        element.__queue.check = check;\n        element.__queue.go = go;\n      }\n      return (this.indexOf(element) !== 0);\n    },\n\n    indexOf: function(element) {\n      var i = queueForElement(element).indexOf(element);\n      if (i >= 0 && document.contains(element)) {\n        i += (HTMLImports.useNative || HTMLImports.ready) ? \n          importQueue.length : 1e9;\n      }\n      return i;  \n    },\n\n    // tell the queue an element is ready to be registered\n    go: function(element) {\n      var readied = this.remove(element);\n      if (readied) {\n        element.__queue.flushable = true;\n        this.addToFlushQueue(readied);\n        this.check();\n      }\n    },\n\n    remove: function(element) {\n      var i = this.indexOf(element);\n      if (i !== 0) {\n        //console.warn('queue order wrong', i);\n        return;\n      }\n      return queueForElement(element).shift();\n    },\n\n    check: function() {\n      // next\n      var element = this.nextElement();\n      if (element) {\n        element.__queue.check.call(element);\n      }\n      if (this.canReady()) {\n        this.ready();\n        return true;\n      }\n    },\n\n    nextElement: function() {\n      return nextQueued();\n    },\n\n    canReady: function() {\n      return !this.waitToReady && this.isEmpty();\n    },\n\n    isEmpty: function() {\n      for (var i=0, l=elements.length, e; (i<l) && \n          (e=elements[i]); i++) {\n        if (e.__queue && !e.__queue.flushable) {\n          return;\n        }\n      }\n      return true;\n    },\n\n    addToFlushQueue: function(element) {\n      flushQueue.push(element);  \n    },\n\n    flush: function() {\n      // prevent re-entrance\n      if (this.flushing) {\n        return;\n      }\n      this.flushing = true;\n      var element;\n      while (flushQueue.length) {\n        element = flushQueue.shift();\n        element.__queue.go.call(element);\n        element.__queue = null;\n      }\n      this.flushing = false;\n    },\n\n    ready: function() {\n      this.flush();\n      // TODO(sorvell): As an optimization, turn off CE polyfill upgrading\n      // while registering. This way we avoid having to upgrade each document\n      // piecemeal per registration and can instead register all elements\n      // and upgrade once in a batch. Without this optimization, upgrade time\n      // degrades significantly when SD polyfill is used. This is mainly because\n      // querying the document tree for elements is slow under the SD polyfill.\n      if (CustomElements.ready === false) {\n        CustomElements.upgradeDocumentTree(document);\n        CustomElements.ready = true;\n      }\n      Platform.flush();\n      requestAnimationFrame(this.flushReadyCallbacks);\n    },\n\n    addReadyCallback: function(callback) {\n      if (callback) {\n        readyCallbacks.push(callback);\n      }\n    },\n\n    flushReadyCallbacks: function() {\n      if (readyCallbacks) {\n        var fn;\n        while (readyCallbacks.length) {\n          fn = readyCallbacks.shift();\n          fn();\n        }\n      }\n    },\n\n    waitToReady: true\n\n  };\n\n  var elements = [];\n  var flushQueue = [];\n  var importQueue = [];\n  var mainQueue = [];\n  var readyCallbacks = [];\n\n  function queueForElement(element) {\n    return document.contains(element) ? mainQueue : importQueue;\n  }\n\n  function nextQueued() {\n    return importQueue.length ? importQueue[0] : mainQueue[0];\n  }\n\n  var polymerReadied = false; \n\n  document.addEventListener('WebComponentsReady', function() {\n    CustomElements.ready = false;\n  });\n  \n  function whenPolymerReady(callback) {\n    queue.waitToReady = true;\n    CustomElements.ready = false;\n    HTMLImports.whenImportsReady(function() {\n      queue.addReadyCallback(callback);\n      queue.waitToReady = false;\n      queue.check();\n    });\n  }\n\n  // exports\n  scope.elements = elements;\n  scope.queue = queue;\n  scope.whenReady = scope.whenPolymerReady = whenPolymerReady;\n})(Polymer);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function(scope) {\n\n  var whenPolymerReady = scope.whenPolymerReady;\n\n  function importElements(elementOrFragment, callback) {\n    if (elementOrFragment) {\n      document.head.appendChild(elementOrFragment);\n      whenPolymerReady(callback);\n    } else if (callback) {\n      callback();\n    }\n  }\n\n  function importUrls(urls, callback) {\n    if (urls && urls.length) {\n        var frag = document.createDocumentFragment();\n        for (var i=0, l=urls.length, url, link; (i<l) && (url=urls[i]); i++) {\n          link = document.createElement('link');\n          link.rel = 'import';\n          link.href = url;\n          frag.appendChild(link);\n        }\n        importElements(frag, callback);\n    } else if (callback) {\n      callback();\n    }\n  }\n\n  // exports\n  scope.import = importUrls;\n  scope.importElements = importElements;\n\n})(Polymer);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function(scope) {\n\n  // imports\n\n  var extend = scope.extend;\n  var api = scope.api;\n  var queue = scope.queue;\n  var whenPolymerReady = scope.whenPolymerReady;\n  var getRegisteredPrototype = scope.getRegisteredPrototype;\n  var waitingForPrototype = scope.waitingForPrototype;\n\n  // declarative implementation: <polymer-element>\n\n  var prototype = extend(Object.create(HTMLElement.prototype), {\n\n    createdCallback: function() {\n      if (this.getAttribute('name')) {\n        this.init();\n      }\n    },\n\n    init: function() {\n      // fetch declared values\n      this.name = this.getAttribute('name');\n      this.extends = this.getAttribute('extends');\n      queue.wait(this);\n      // initiate any async resource fetches\n      this.loadResources();\n      // register when all constraints are met\n      this.registerWhenReady();\n    },\n\n    // TODO(sorvell): we currently queue in the order the prototypes are \n    // registered, but we should queue in the order that polymer-elements\n    // are registered. We are currently blocked from doing this based on \n    // crbug.com/395686.\n    registerWhenReady: function() {\n     if (this.registered\n       || this.waitingForPrototype(this.name)\n       || this.waitingForQueue()\n       || this.waitingForResources()) {\n          return;\n      }\n      queue.go(this);\n    },\n\n    _register: function() {\n      //console.log('registering', this.name);\n      // warn if extending from a custom element not registered via Polymer\n      if (isCustomTag(this.extends) && !isRegistered(this.extends)) {\n        console.warn('%s is attempting to extend %s, an unregistered element ' +\n            'or one that was not registered with Polymer.', this.name,\n            this.extends);\n      }\n      this.register(this.name, this.extends);\n      this.registered = true;\n    },\n\n    waitingForPrototype: function(name) {\n      if (!getRegisteredPrototype(name)) {\n        // then wait for a prototype\n        waitingForPrototype(name, this);\n        // emulate script if user is not supplying one\n        this.handleNoScript(name);\n        // prototype not ready yet\n        return true;\n      }\n    },\n\n    handleNoScript: function(name) {\n      // if explicitly marked as 'noscript'\n      if (this.hasAttribute('noscript') && !this.noscript) {\n        this.noscript = true;\n        // imperative element registration\n        Polymer(name);\n      }\n    },\n\n    waitingForResources: function() {\n      return this._needsResources;\n    },\n\n    // NOTE: Elements must be queued in proper order for inheritance/composition\n    // dependency resolution. Previously this was enforced for inheritance,\n    // and by rule for composition. It's now entirely by rule.\n    waitingForQueue: function() {\n      return queue.enqueue(this, this.registerWhenReady, this._register);\n    },\n\n    loadResources: function() {\n      this._needsResources = true;\n      this.loadStyles(function() {\n        this._needsResources = false;\n        this.registerWhenReady();\n      }.bind(this));\n    }\n\n  });\n\n  // semi-pluggable APIs \n\n  // TODO(sjmiles): should be fully pluggable (aka decoupled, currently\n  // the various plugins are allowed to depend on each other directly)\n  api.publish(api.declaration, prototype);\n\n  // utility and bookkeeping\n\n  function isRegistered(name) {\n    return Boolean(HTMLElement.getPrototypeForTag(name));\n  }\n\n  function isCustomTag(name) {\n    return (name && name.indexOf('-') >= 0);\n  }\n\n  // boot tasks\n\n  whenPolymerReady(function() {\n    document.body.removeAttribute('unresolved');\n    document.dispatchEvent(\n      new CustomEvent('polymer-ready', {bubbles: true})\n    );\n  });\n\n  // register polymer-element with document\n\n  document.registerElement('polymer-element', {prototype: prototype});\n\n})(Polymer);\n","/*\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * The `auto-binding` element extends the template element. It provides a quick \n * and easy way to do data binding without the need to setup a model. \n * The `auto-binding` element itself serves as the model and controller for the \n * elements it contains. Both data and event handlers can be bound. \n *\n * The `auto-binding` element acts just like a template that is bound to \n * a model. It stamps its content in the dom adjacent to itself. When the \n * content is stamped, the `template-bound` event is fired.\n *\n * Example:\n *\n *     <template is=\"auto-binding\">\n *       <div>Say something: <input value=\"{{value}}\"></div>\n *       <div>You said: {{value}}</div>\n *       <button on-tap=\"{{buttonTap}}\">Tap me!</button>\n *     </template>\n *     <script>\n *       var template = document.querySelector('template');\n *       template.value = 'something';\n *       template.buttonTap = function() {\n *         console.log('tap!');\n *       };\n *     </script>\n *\n * @module Polymer\n * @status stable\n*/\n\n(function() {\n\n  var element = document.createElement('polymer-element');\n  element.setAttribute('name', 'auto-binding');\n  element.setAttribute('extends', 'template');\n  element.init();\n\n  Polymer('auto-binding', {\n\n    createdCallback: function() {\n      this.syntax = this.bindingDelegate = this.makeSyntax();\n      // delay stamping until polymer-ready so that auto-binding is not\n      // required to load last.\n      Polymer.whenPolymerReady(function() {\n        this.model = this;\n        this.setAttribute('bind', '');\n        // we don't bother with an explicit signal here, we could ust a MO\n        // if necessary\n        this.async(function() {\n          // note: this will marshall *all* the elements in the parentNode\n          // rather than just stamped ones. We'd need to use createInstance\n          // to fix this or something else fancier.\n          this.marshalNodeReferences(this.parentNode);\n          // template stamping is asynchronous so stamping isn't complete\n          // by polymer-ready; fire an event so users can use stamped elements\n          this.fire('template-bound');\n        });\n      }.bind(this));\n    },\n\n    makeSyntax: function() {\n      var events = Object.create(Polymer.api.declaration.events);\n      var self = this;\n      events.findController = function() { return self.model; };\n\n      var syntax = new PolymerExpressions();\n      var prepareBinding = syntax.prepareBinding;  \n      syntax.prepareBinding = function(pathString, name, node) {\n        return events.prepareEventBinding(pathString, name, node) ||\n               prepareBinding.call(syntax, pathString, name, node);\n      };\n      return syntax;\n    }\n\n  });\n\n})();\n"]}